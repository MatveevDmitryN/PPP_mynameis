2025-02-06 04:02:25.494 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 10484 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:02:25.497 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:02:25.498 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:02:25.604 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:02:25.609 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:02:27.029 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:02:27.144 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 2 JPA repository interfaces.
2025-02-06 04:02:28.437 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:02:28.469 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:02:28.470 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:02:28.569 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:02:28.570 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2959 ms
2025-02-06 04:02:29.074 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:02:29.200 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:02:29.274 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:02:29.881 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:02:29.943 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:02:30.291 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6dc8826d
2025-02-06 04:02:30.295 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:02:30.482 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:02:32.123 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:02:32.245 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:02:32.891 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:02:33.920 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:02:34.036 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:02:34.119 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:02:34.129 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /user, /login, /admin] in 'viewControllerHandlerMapping'
2025-02-06 04:02:34.259 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:02:34.356 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:02:34.471 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:02:34.584 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:02:34.791 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:02:34.866 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:02:34.883 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.708 seconds (process running for 12.357)
2025-02-06 04:02:34.904 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:02:35.007 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:02:35.104 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:35.114 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:35.118 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:35.121 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:35.145 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:02:35.184 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:02:35.193 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:02:35.200 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:02:35.206 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:02:35.217 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:02:35.220 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:02:35.225 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:35.229 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:35.233 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:02:35.236 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:02:35.245 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:02:35.261 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:02:35.297 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:02:35.299 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:02:35.867 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$WTuwETiG6.TnzhLW/2mFVeiE.UM7a0jlJkdixhbsMjrvWnCsriewq
2025-02-06 04:02:35.868 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$5Y7Iu6EGgqSy7kYDcNsgmOhLHyEdyeBmjh3JB6u/jb0Rbqp5TSK5G
2025-02-06 04:02:35.870 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:02:35.909 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:02:35.915 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:02:35.919 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:02:35.929 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:02:35.943 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:02:35.946 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:02:35.950 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:02:35.953 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:02:35.954 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:02:35.959 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:02:43.477 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:02:43.478 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:02:43.478 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:02:43.479 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:02:43.479 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:02:43.481 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6b70c8c9
2025-02-06 04:02:43.482 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7e1813ab
2025-02-06 04:02:43.483 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:02:43.483 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-06 04:02:43.538 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:02:43.569 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 04:02:43.586 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1eb738b8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3D874B2E3B29CE507B0207FF2736C37A], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:43.588 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:02:43.589 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 04:02:43.596 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:02:43.596 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 04:02:43.601 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:02:43.603 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 04:02:43.641 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:02:43.688 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:02:43.696 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:02:43.701 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:02:43.706 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:43.710 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:43.714 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:43.717 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:43.728 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:02:43.732 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:43.736 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:43.739 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:43.743 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:43.842 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:02:44.573 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:02:44.575 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1eb738b8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3D874B2E3B29CE507B0207FF2736C37A], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:45.318 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:02:47.811 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:02:47.812 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:02:47.812 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:02:47.813 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:02:47.815 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:02:47.821 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:02:47.821 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1eb738b8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3D874B2E3B29CE507B0207FF2736C37A], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:50.576 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:02:50.741 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:02:50.743 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:50.862 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:02:50.876 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 2846038049349E8C3B8F0EF35BD30706
2025-02-06 04:02:50.877 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1ed0ab36, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@58e8600]
2025-02-06 04:02:50.877 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1ed0ab36, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:02:50.877 [http-nio-8081-exec-4] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:02:50.884 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:02:50.884 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1ed0ab36, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:50.885 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:02:50.885 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:02:50.885 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:02:50.885 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:02:50.887 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:02:50.889 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:02:50.891 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:50.893 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:50.894 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:50.897 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:50.901 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:02:50.903 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:50.906 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:50.908 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:02:50.910 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:02:50.914 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:02:50.925 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:02:59.707 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit/8
2025-02-06 04:02:59.708 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1ed0ab36, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:59.708 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit/8
2025-02-06 04:02:59.708 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit/8", parameters={}
2025-02-06 04:02:59.710 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:02:59.716 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:02:59.733 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/edit/8.]
2025-02-06 04:02:59.733 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:02:59.744 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:02:59.745 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1ed0ab36, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:02:59.745 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:02:59.745 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:02:59.746 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:02:59.759 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:02:59.770 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:10:02.065 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:10:02.074 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:10:02.084 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:10:02.091 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:10:02.105 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:10:17.873 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 30132 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:10:17.876 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:10:17.877 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:10:17.991 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:10:17.991 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:10:19.441 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:10:19.565 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
2025-02-06 04:10:20.506 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:10:20.525 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:10:20.526 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:10:20.592 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:10:20.593 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2599 ms
2025-02-06 04:10:20.964 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:10:21.082 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:10:21.140 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:10:21.585 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:10:21.631 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:10:21.874 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a143d30
2025-02-06 04:10:21.878 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:10:22.031 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:10:23.543 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:10:23.643 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:10:24.052 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:10:25.026 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:10:25.145 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:10:25.230 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:10:25.238 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:10:25.350 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:10:25.422 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:10:25.528 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:10:25.654 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:10:25.870 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:10:25.934 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:10:25.950 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 9.633 seconds (process running for 11.479)
2025-02-06 04:10:25.966 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:10:26.064 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:10:26.132 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:10:26.142 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:10:26.144 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:10:26.147 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:10:26.167 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:10:26.197 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:10:26.204 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:10:26.209 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:10:26.213 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:10:26.222 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:10:26.224 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:10:26.226 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:10:26.229 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:10:26.231 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:10:26.234 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:10:26.238 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:10:26.247 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:10:26.265 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:10:26.266 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:10:26.589 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$Kty5Nx7OaxTMvTkv9iJvF.K1ySr9yiN9PlsPnH0ayeguKE8DlUEuu
2025-02-06 04:10:26.590 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$UcN56WFndQIJQnK995GLceriEHlaH3aLVIGNddEzm4umCxHn698Ni
2025-02-06 04:10:26.591 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:10:26.618 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:10:26.623 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:10:26.626 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:10:26.635 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:10:26.648 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:10:26.650 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:10:26.653 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:10:26.656 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:10:26.656 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:10:26.661 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:11:30.723 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:11:30.724 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:11:30.724 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:11:30.725 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:11:30.725 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:11:30.726 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@84a823b
2025-02-06 04:11:30.727 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@380451d4
2025-02-06 04:11:30.728 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:11:30.728 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-06 04:11:30.750 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:11:30.760 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:11:30.763 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:11:30.766 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:11:30.784 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:11:31.069 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:11:31.070 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5bd5c1ec, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2846038049349E8C3B8F0EF35BD30706], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:33.796 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:11:34.088 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:11:34.092 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:34.274 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:11:34.293 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from B132EC763696ABC0130801F08B015839
2025-02-06 04:11:34.295 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@88ad07d]
2025-02-06 04:11:34.295 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:11:34.296 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:11:34.310 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:11:34.312 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:34.312 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:11:34.312 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:11:34.313 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:11:34.343 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:11:34.350 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:11:34.354 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:11:34.358 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:34.362 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:34.365 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:34.369 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:34.379 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:11:34.382 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:34.388 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:34.391 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:34.395 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:34.426 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:11:34.671 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:11:36.911 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit/10
2025-02-06 04:11:36.912 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:36.912 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit/10
2025-02-06 04:11:36.912 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit/10", parameters={}
2025-02-06 04:11:36.914 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:11:36.916 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:11:36.923 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/edit/10.]
2025-02-06 04:11:36.923 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:11:36.933 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:11:36.933 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:36.934 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:11:36.934 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:11:36.936 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:11:36.950 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:11:36.955 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:11:39.375 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:11:39.376 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:39.376 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:11:39.376 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:11:39.376 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:11:39.376 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:11:39.378 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:11:39.379 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:11:39.381 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:39.383 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:39.384 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:39.385 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:39.391 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:11:39.393 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:39.394 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:39.395 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:39.396 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:39.399 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:11:39.405 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:11:40.415 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 04:11:40.415 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:40.416 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 04:11:40.416 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 04:11:40.416 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:11:40.418 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:11:40.418 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/create.]
2025-02-06 04:11:40.418 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:11:40.419 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:11:40.420 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:40.420 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:11:40.420 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:11:40.421 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:11:40.425 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:11:40.430 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:11:41.432 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:11:41.433 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d9e0144, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:11:41.433 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:11:41.433 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:11:41.433 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:11:41.434 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:11:41.436 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:11:41.438 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:11:41.441 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:41.444 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:41.445 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:41.447 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:41.456 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:11:41.458 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:41.460 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:41.462 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:11:41.464 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:11:41.469 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:11:41.484 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:14:43.427 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:14:43.432 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:14:43.443 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:14:43.448 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:14:43.456 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:14:53.982 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 12360 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:14:53.987 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:14:53.990 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:14:54.172 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:14:54.174 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:14:56.102 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:14:56.263 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 139 ms. Found 2 JPA repository interfaces.
2025-02-06 04:14:57.596 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:14:57.626 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:14:57.626 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:14:57.730 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:14:57.731 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3555 ms
2025-02-06 04:14:58.141 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:14:58.253 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:14:58.324 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:14:58.947 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:14:59.002 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:14:59.263 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14c48c48
2025-02-06 04:14:59.266 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:14:59.401 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:15:00.846 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:15:00.979 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:15:01.692 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:15:03.020 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:15:03.179 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:15:03.289 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:15:03.298 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:15:03.446 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:15:03.575 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:15:03.688 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:15:03.860 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:15:04.159 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:15:04.243 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:15:04.262 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 12.568 seconds (process running for 14.577)
2025-02-06 04:15:04.281 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:15:04.402 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:15:04.480 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:04.491 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:04.494 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:04.497 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:04.521 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:15:04.552 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:15:04.564 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:15:04.570 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:15:04.574 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:15:04.583 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:15:04.587 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:15:04.590 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:04.592 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:04.596 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:15:04.597 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:15:04.604 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:15:04.616 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:15:04.664 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:15:04.666 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:15:05.063 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$9wcxn8j.5Rn9BFA6LkqA7e0FaolMGFt1AIvY8c20UrcC6xlRx/1ym
2025-02-06 04:15:05.063 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$jHl.CKcBWm/vL4ndnlTFbeeo9AIobmOF8ZJCnHznjnLcd3mVd51XC
2025-02-06 04:15:05.065 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:15:05.091 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:15:05.095 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:15:05.098 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:15:05.106 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:15:05.114 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:15:05.116 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:15:05.118 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:15:05.121 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:15:05.122 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:15:05.128 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:15:34.138 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:15:34.138 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:15:34.139 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:15:34.139 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:15:34.139 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:15:34.140 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@50ad2b0e
2025-02-06 04:15:34.140 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3394c9fc
2025-02-06 04:15:34.140 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:15:34.140 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-02-06 04:15:34.154 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:15:34.161 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:15:34.163 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:15:34.165 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:15:34.176 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:15:34.348 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:15:34.349 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5b3a4501, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B132EC763696ABC0130801F08B015839], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:15:37.075 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:15:37.252 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:15:37.255 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:37.384 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:15:37.397 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 4C55A7D0043BF55240DA93239E3FBF41
2025-02-06 04:15:37.398 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@8800ca3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5391dd98]
2025-02-06 04:15:37.399 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@8800ca3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:15:37.399 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:15:37.407 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:15:37.407 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@8800ca3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:15:37.407 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:15:37.408 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:15:37.408 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:15:37.433 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:15:37.436 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:15:37.439 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:15:37.442 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:37.444 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:37.447 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:37.450 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:37.456 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:15:37.458 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:37.460 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:37.462 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:15:37.464 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:15:37.483 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:15:37.636 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:15:58.105 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit/12
2025-02-06 04:15:58.106 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@8800ca3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:15:58.106 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit/12
2025-02-06 04:15:58.106 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit/12", parameters={}
2025-02-06 04:15:58.107 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:15:58.110 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:15:58.119 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/edit/12.]
2025-02-06 04:15:58.119 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:15:58.124 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:15:58.124 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@8800ca3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:15:58.124 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:15:58.124 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:15:58.125 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:15:58.138 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:15:58.146 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:17:26.071 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:17:26.079 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:17:26.086 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:17:26.090 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:17:26.100 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:17:36.521 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 25444 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:17:36.526 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:17:36.527 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:17:36.659 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:17:36.660 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:17:38.274 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:17:38.373 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 2 JPA repository interfaces.
2025-02-06 04:17:39.318 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:17:39.351 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:17:39.351 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:17:39.462 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:17:39.463 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2802 ms
2025-02-06 04:17:39.909 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:17:40.010 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:17:40.094 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:17:40.663 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:17:40.719 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:17:40.992 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@58debc0f
2025-02-06 04:17:40.995 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:17:41.146 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:17:42.591 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:17:42.709 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:17:43.147 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:17:44.214 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:17:44.314 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:17:44.389 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:17:44.396 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:17:44.500 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:17:44.558 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:17:44.627 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:17:44.713 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:17:44.901 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:17:44.968 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:17:44.980 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.005 seconds (process running for 11.985)
2025-02-06 04:17:44.999 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:17:45.096 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:17:45.153 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:17:45.160 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:17:45.162 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:17:45.164 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:17:45.182 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:17:45.210 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:17:45.216 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:17:45.222 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:17:45.229 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:17:45.238 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:17:45.241 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:17:45.245 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:17:45.248 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:17:45.252 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:17:45.254 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:17:45.260 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:17:45.274 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:17:45.295 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:17:45.297 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:17:45.610 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$kOAqtXSRAH.hAga3YsFNvO83F/EZlbqml5mHV2YRgRXiVND77EZ2a
2025-02-06 04:17:45.611 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$5TTNeouoZ.AM/Sl736b/ce5akC8DlRAKPs1i0IgRcSaFj4XyMbGW.
2025-02-06 04:17:45.612 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:17:45.635 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:17:45.639 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:17:45.641 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:17:45.646 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:17:45.658 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:17:45.660 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:17:45.663 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:17:45.665 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:17:45.666 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:17:45.671 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:18:19.102 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:18:19.102 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:18:19.102 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:18:19.102 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:18:19.102 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:18:19.103 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@143eacb7
2025-02-06 04:18:19.103 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3d6d5f5e
2025-02-06 04:18:19.104 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:18:19.104 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 04:18:19.121 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:18:19.129 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@4d744b86, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:19.130 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:18:19.132 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:18:19.133 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:18:19.148 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:18:19.151 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:18:19.153 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:18:19.155 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:19.156 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:19.157 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:19.158 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:19.163 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:18:19.165 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:19.166 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:19.167 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:19.168 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:19.188 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:19.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:19.953 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 04:18:19.954 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 04:18:19.954 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 04:18:19.955 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 04:18:19.958 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:19.961 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:19.961 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@4d744b86, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:21.097 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:18:21.098 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:18:21.098 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:18:21.099 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:18:21.100 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:21.104 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:21.105 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@4d744b86, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4C55A7D0043BF55240DA93239E3FBF41], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:23.965 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:18:24.103 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:18:24.105 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:24.205 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:18:24.218 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 3A1D3A1DCD339D9A55306F13294E24B6
2025-02-06 04:18:24.220 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@253ac8c1]
2025-02-06 04:18:24.220 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:18:24.221 [http-nio-8081-exec-4] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:18:24.229 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:18:24.229 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:24.229 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:18:24.230 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:18:24.230 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:18:24.231 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:18:24.232 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:18:24.235 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:18:24.238 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:24.241 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:24.244 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:24.246 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:24.252 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:18:24.256 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:24.259 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:24.261 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:24.264 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:24.268 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:24.284 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:25.486 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit/13
2025-02-06 04:18:25.487 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:25.487 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit/13
2025-02-06 04:18:25.488 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit/13", parameters={}
2025-02-06 04:18:25.490 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:18:25.495 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:18:25.508 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/edit/13.]
2025-02-06 04:18:25.508 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:18:25.521 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:18:25.522 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:25.522 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:18:25.523 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:18:25.523 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:18:25.541 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:18:25.551 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:18:27.026 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:18:27.026 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:27.026 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:18:27.026 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:18:27.027 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:18:27.027 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:18:27.028 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:18:27.030 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:18:27.034 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:27.038 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:27.040 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:27.042 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:27.048 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:18:27.051 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:27.053 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:27.054 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:18:27.057 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:18:27.062 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:27.073 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:28.735 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit/14
2025-02-06 04:18:28.736 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:28.736 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit/14
2025-02-06 04:18:28.736 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit/14", parameters={}
2025-02-06 04:18:28.737 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:18:28.739 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:18:28.739 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/edit/14.]
2025-02-06 04:18:28.739 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:18:28.741 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:18:28.741 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:28.741 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:18:28.741 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:18:28.742 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:18:28.746 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:18:28.748 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:18:29.710 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 04:18:29.711 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 04:18:29.711 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 04:18:29.711 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 04:18:29.712 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:18:29.718 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:18:29.719 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@45d5d747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:18:31.928 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:18:31.934 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:18:31.943 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:18:31.949 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:18:31.959 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:24:11.276 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 31616 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:24:11.280 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:24:11.283 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:24:11.469 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:24:11.470 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:24:13.884 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:24:14.001 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 101 ms. Found 2 JPA repository interfaces.
2025-02-06 04:24:14.833 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:24:14.856 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:24:14.856 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:24:14.919 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:24:14.919 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3448 ms
2025-02-06 04:24:15.220 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:24:15.302 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:24:15.354 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:24:15.785 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:24:15.829 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:24:16.054 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ac1269f
2025-02-06 04:24:16.056 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:24:16.178 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:24:17.333 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:24:17.412 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:24:17.797 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:24:18.606 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:24:18.703 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:24:18.816 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:24:18.825 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:24:18.929 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:24:18.990 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:24:19.069 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:24:19.164 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:24:19.345 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:24:19.394 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:24:19.404 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.064 seconds (process running for 13.523)
2025-02-06 04:24:19.419 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:24:19.495 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:24:19.543 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:19.550 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:19.552 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:19.554 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:19.569 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:24:19.600 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:24:19.607 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:24:19.612 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:24:19.616 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:24:19.624 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:24:19.625 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:19.628 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:19.630 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:19.633 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:24:19.635 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:24:19.640 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:24:19.649 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:24:19.666 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:24:19.666 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:24:19.969 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$A29jNgMGV7nAH6sjO9jnS..bSgUojwuFc989PvUwU8KGlFnz9tF9K
2025-02-06 04:24:19.969 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$N2deqg4CEQcbY5XJjL25huLbTzqg1J2RFzgZLNfxvtBs/FYwbC61u
2025-02-06 04:24:19.970 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:24:19.991 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:24:19.995 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:24:19.997 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:24:20.002 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:24:20.008 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:24:20.010 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:24:20.012 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:24:20.014 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:24:20.015 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:24:20.019 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:24:21.300 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:24:21.300 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:24:21.300 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:24:21.300 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:24:21.300 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:24:21.301 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3d1d733c
2025-02-06 04:24:21.301 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@59b21f4e
2025-02-06 04:24:21.302 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:24:21.302 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 04:24:21.317 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 04:24:21.327 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 04:24:21.331 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 04:24:21.335 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 04:24:21.351 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:21.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:21.516 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@102d45a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:23.526 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:24:23.527 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:24:23.527 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:24:23.528 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:24:23.530 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:23.578 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:23.578 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@102d45a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3A1D3A1DCD339D9A55306F13294E24B6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:24.784 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:24:25.055 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:24:25.059 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:25.224 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:24:25.245 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 2983DA93E58DA9DEB9B61814988DB331
2025-02-06 04:24:25.247 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1b5c8021]
2025-02-06 04:24:25.247 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:24:25.248 [http-nio-8081-exec-5] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:24:25.281 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:24:25.283 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:25.283 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:24:25.283 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:24:25.284 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:24:25.317 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:24:25.322 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:24:25.325 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:24:25.329 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:25.333 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:25.336 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:25.340 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:25.347 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:25.352 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:25.355 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:25.358 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:25.360 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:25.386 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:25.585 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:27.016 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/16
2025-02-06 04:24:27.016 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:27.017 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/16
2025-02-06 04:24:27.017 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/16", parameters={}
2025-02-06 04:24:27.017 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:24:27.021 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 16
2025-02-06 04:24:27.029 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:24:27.032 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:27.038 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:27.040 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:27.041 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:27.042 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:27.044 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:27.047 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:27.087 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:27.089 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:27.094 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:27.096 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:27.100 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:27.102 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:27.106 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:35.885 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user/16
2025-02-06 04:24:35.886 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:35.886 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user/16
2025-02-06 04:24:35.886 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user/16", parameters={masked}
2025-02-06 04:24:35.893 [http-nio-8081-exec-9] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-02-06 04:24:35.894 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 405 METHOD_NOT_ALLOWED
2025-02-06 04:24:35.901 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 04:24:35.901 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:35.901 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-06 04:24:35.901 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={masked}
2025-02-06 04:24:35.902 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:24:35.909 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:24:35.915 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 405
2025-02-06 04:24:41.212 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:24:41.213 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:41.213 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:24:41.213 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:24:41.214 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:24:41.214 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:24:41.216 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:24:41.217 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:24:41.219 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:41.221 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:41.224 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:41.227 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:41.232 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:41.235 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:41.238 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:41.239 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:41.240 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:41.242 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:41.248 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:42.280 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 04:24:42.281 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:42.281 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 04:24:42.281 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 04:24:42.283 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 04:24:42.286 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 04:24:42.288 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/create.]
2025-02-06 04:24:42.288 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 04:24:42.291 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 04:24:42.291 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:42.291 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 04:24:42.292 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 04:24:42.293 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:24:42.303 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:24:42.306 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 04:24:44.790 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:24:44.791 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:44.791 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:24:44.791 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:24:44.791 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:24:44.791 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:24:44.793 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:24:44.795 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:24:44.797 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:44.799 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:44.801 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:44.802 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:44.806 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:44.807 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:44.808 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:44.810 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:44.810 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:44.813 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:44.823 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:52.769 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/16
2025-02-06 04:24:52.769 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:52.769 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/16
2025-02-06 04:24:52.769 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/16", parameters={}
2025-02-06 04:24:52.770 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:24:52.771 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 16
2025-02-06 04:24:52.771 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:24:52.773 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:52.779 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:24:52.781 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:52.785 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:52.788 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:24:52.789 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:52.791 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:24:52.798 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:52.799 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:52.805 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:52.808 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:52.812 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:24:52.813 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:24:52.816 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:24:56.475 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user/16
2025-02-06 04:24:56.475 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:56.475 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user/16
2025-02-06 04:24:56.476 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user/16", parameters={masked}
2025-02-06 04:24:56.476 [http-nio-8081-exec-1] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2025-02-06 04:24:56.476 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 405 METHOD_NOT_ALLOWED
2025-02-06 04:24:56.477 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 04:24:56.477 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7fbbad73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:24:56.477 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-06 04:24:56.478 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={masked}
2025-02-06 04:24:56.478 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 04:24:56.483 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 04:24:56.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 405
2025-02-06 04:29:30.428 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:29:30.436 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:29:30.445 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:29:30.452 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:29:30.468 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:32:03.048 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 26064 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:32:03.051 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:32:03.052 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:32:03.175 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:32:03.175 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:32:04.475 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:32:04.579 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 90 ms. Found 2 JPA repository interfaces.
2025-02-06 04:32:05.605 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:32:05.628 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:32:05.630 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:32:05.708 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:32:05.710 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2534 ms
2025-02-06 04:32:06.145 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:32:06.284 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:32:06.400 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:32:07.605 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:32:07.687 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:32:08.063 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36982ef0
2025-02-06 04:32:08.067 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:32:08.245 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:32:09.843 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:32:09.940 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:32:10.406 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:32:11.618 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:32:11.757 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:32:11.886 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:32:11.895 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:32:12.019 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:32:12.090 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:32:12.183 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:32:12.293 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:32:12.524 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:32:12.584 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:32:12.598 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 11.255 seconds (process running for 12.891)
2025-02-06 04:32:12.614 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:32:12.675 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:32:12.675 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:32:12.676 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:32:12.676 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:32:12.676 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:32:12.677 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@54af27e1
2025-02-06 04:32:12.678 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5e6c847d
2025-02-06 04:32:12.678 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:32:12.678 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 04:32:12.702 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:32:12.716 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:32:12.716 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:32:12.720 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:32:12.726 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:32:12.759 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:12.791 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:12.800 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:12.802 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:12.805 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:12.826 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:32:12.858 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:32:12.863 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:32:12.867 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:32:12.871 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:32:12.882 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:32:12.883 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:12.885 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:12.887 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:12.890 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:32:12.891 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:32:12.896 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:32:12.905 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:32:12.922 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:32:12.922 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:32:13.101 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:13.102 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@32e9b1f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2983DA93E58DA9DEB9B61814988DB331], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:13.318 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$z5rGJ.cFxrUzDPZg.KOfZui6BbHsv2Hm9IZfEb7H1.Ps3UhZU1ZYe
2025-02-06 04:32:13.318 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$C6F9d3sMpr2.H82Yr0589O36a0jNI/nBD42l6mObkSXYFolVPqxu.
2025-02-06 04:32:13.320 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:32:13.351 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:32:13.356 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:32:13.360 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:32:13.366 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:32:13.375 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:32:13.376 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:32:13.379 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:32:13.382 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:32:13.383 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:32:13.388 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:32:17.071 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:32:17.231 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:32:17.236 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:17.365 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:32:17.380 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from DAA9F868C29C26BA41F6053229666966
2025-02-06 04:32:17.382 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@75b7b98c]
2025-02-06 04:32:17.382 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:32:17.384 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:32:17.392 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:32:17.394 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:17.394 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:32:17.395 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:32:17.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:32:17.417 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:32:17.420 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:32:17.423 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:32:17.426 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:17.428 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:17.431 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:17.434 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:17.440 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:17.442 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:17.443 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:17.446 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:17.447 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:17.465 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:17.623 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:20.088 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/18
2025-02-06 04:32:20.089 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:20.089 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/18
2025-02-06 04:32:20.089 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/18", parameters={}
2025-02-06 04:32:20.090 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:32:20.093 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 18
2025-02-06 04:32:20.103 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:32:20.105 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:20.108 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:20.109 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:20.110 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:20.111 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:20.112 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:20.115 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:20.160 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:20.163 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:20.166 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:20.168 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:20.171 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:20.173 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:20.177 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:25.112 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:32:25.112 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:25.112 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:32:25.113 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:32:25.113 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:32:25.121 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:25.124 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.127 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:32:25.128 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:32:25.129 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:25.131 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.246 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:32:25.249 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:32:25.254 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:32:25.257 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:25.260 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - User null saved successfully
2025-02-06 04:32:25.265 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 04:32:25.275 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:32:25.279 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 04:32:25.280 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 04:32:25.284 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:32:25.284 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:25.284 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:32:25.284 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:32:25.285 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:32:25.285 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:32:25.286 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:32:25.287 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:32:25.290 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.291 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:25.293 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.294 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:25.300 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:25.301 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:25.303 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.305 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:25.306 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:25.310 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:25.318 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:34.600 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 04:32:34.600 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:34.600 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 04:32:34.600 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 04:32:34.602 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 04:32:34.602 [http-nio-8081-exec-7] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: admin
2025-02-06 04:32:34.603 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:34.615 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:36.893 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 04:32:36.894 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:36.894 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@72cdd7b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=DAA9F868C29C26BA41F6053229666966], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:36.895 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session A2AB5A9B85E8A37E9D796DBC570EAA2C
2025-02-06 04:32:36.896 [http-nio-8081-exec-8] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 04:32:36.905 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 04:32:36.922 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 04:32:36.923 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 04:32:36.924 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:32:36.925 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:36.930 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:36.932 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:32:38.790 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:32:38.794 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:32:38.946 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:32:38.951 [http-nio-8081-exec-10] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:32:38.958 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:32:38.959 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:32:38.960 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:32:38.961 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:32:38.962 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:38.968 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:38.968 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:32:46.113 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:32:46.113 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:32:46.115 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:46.207 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:32:46.208 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 306F7AD2120F1D6800FBC6F4328D0744
2025-02-06 04:32:46.208 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3e9adec8]
2025-02-06 04:32:46.208 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:32:46.208 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:32:46.214 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:32:46.214 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:46.215 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:32:46.215 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:32:46.215 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:32:46.215 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:32:46.216 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:32:46.217 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:32:46.219 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:46.221 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:46.223 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:46.224 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:46.228 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:46.229 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:46.230 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:46.233 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:46.234 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:46.239 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:46.245 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:32:49.936 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/18
2025-02-06 04:32:49.937 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:32:49.937 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/18
2025-02-06 04:32:49.937 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/18", parameters={}
2025-02-06 04:32:49.938 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:32:49.939 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 18
2025-02-06 04:32:49.940 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:32:49.942 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:49.948 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:32:49.950 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:49.952 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:49.953 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:32:49.955 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:49.957 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:32:49.967 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:49.969 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:49.973 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:49.974 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:49.979 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:32:49.980 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:32:49.984 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:02.730 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:33:02.731 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:02.731 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:33:02.731 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:33:02.731 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:33:02.735 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:02.737 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.740 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:33:02.741 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:33:02.741 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:02.743 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.858 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:33:02.860 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:33:02.861 [http-nio-8081-exec-5] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:33:02.863 [http-nio-8081-exec-5] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:33:02.868 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:02.870 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:02.871 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.872 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:02.873 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.876 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:02.884 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:02.891 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.898 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:02.899 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.904 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:02.906 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:02.910 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:15.758 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:33:15.758 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:15.758 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:33:15.758 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:33:15.758 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:33:15.761 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:15.763 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.766 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:33:15.766 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:33:15.767 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:15.769 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.859 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:33:15.860 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:33:15.861 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:33:15.861 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:33:15.866 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:15.867 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:15.868 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.869 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:15.870 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.873 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:15.877 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:15.878 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.885 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:15.888 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.896 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:15.899 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:15.901 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:33:33.083 [http-nio-8081-exec-9] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:33:33.084 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:33:33.086 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:33:33.088 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:33.090 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:33.092 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:33.094 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:33.100 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:33.101 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:33.104 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:33.105 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:33.109 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:33.112 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:33.118 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:38.047 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/18
2025-02-06 04:33:38.047 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:38.047 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/18
2025-02-06 04:33:38.047 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/18", parameters={}
2025-02-06 04:33:38.048 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:33:38.049 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 18
2025-02-06 04:33:38.050 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:33:38.051 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:38.057 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:38.058 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:38.063 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:38.066 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:38.067 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:38.070 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:38.078 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:38.080 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:38.087 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:38.090 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:38.096 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:38.098 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:38.102 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:57.208 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:33:57.208 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:57.208 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:33:57.208 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:33:57.208 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:33:57.212 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:57.213 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.215 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:33:57.216 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:33:57.217 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:57.218 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.318 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:33:57.319 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:33:57.321 [http-nio-8081-exec-1] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:33:57.322 [http-nio-8081-exec-1] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:33:57.325 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:57.326 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:57.327 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.328 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:57.329 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.331 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:57.336 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:57.337 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.340 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:57.343 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.346 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:57.347 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:57.350 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:59.538 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:33:59.538 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:59.538 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:33:59.538 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:33:59.538 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:33:59.540 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.543 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.545 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:33:59.546 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:33:59.546 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.549 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.643 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:33:59.644 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:33:59.645 [http-nio-8081-exec-2] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:33:59.645 [http-nio-8081-exec-2] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:33:59.648 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:33:59.649 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:59.650 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.651 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:33:59.652 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.654 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:33:59.659 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.661 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.663 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.666 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.669 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.670 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.673 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:33:59.958 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:33:59.958 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@643efbab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:33:59.958 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:33:59.959 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:33:59.959 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:33:59.964 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.966 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:33:59.969 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:33:59.970 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 18
2025-02-06 04:33:59.970 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:33:59.971 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.099 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:34:00.101 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:34:00.102 [http-nio-8081-exec-3] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:34:00.103 [http-nio-8081-exec-3] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:34:00.106 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:34:00.107 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:34:00.109 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.110 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:34:00.111 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.113 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:34:00.119 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:34:00.121 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.125 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:34:00.127 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.131 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:34:00.133 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:34:00.136 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:34:04.092 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:34:04.097 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:34:04.104 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:34:04.108 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:34:04.116 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:35:40.653 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 26296 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:35:40.659 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:35:40.660 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:35:40.799 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:35:40.800 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:35:42.270 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:35:42.387 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
2025-02-06 04:35:43.396 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:35:43.417 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:35:43.418 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:35:43.492 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:35:43.492 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2691 ms
2025-02-06 04:35:43.796 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:35:43.880 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:35:43.931 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:35:44.379 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:35:44.424 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:35:44.644 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@29151e4e
2025-02-06 04:35:44.647 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:35:44.765 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:35:45.999 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:35:46.091 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:35:46.454 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:35:47.381 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:35:47.474 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:35:47.546 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:35:47.552 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:35:47.645 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:35:47.697 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:35:47.757 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:35:47.835 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:35:48.057 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:35:48.116 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:35:48.127 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 8.967 seconds (process running for 10.895)
2025-02-06 04:35:48.143 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:35:48.230 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:35:48.282 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:48.290 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:48.294 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:48.297 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:48.314 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:35:48.337 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:35:48.343 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:35:48.348 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:35:48.353 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:35:48.361 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:35:48.364 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:35:48.366 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:48.368 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:48.372 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:35:48.375 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:35:48.380 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:35:48.389 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:35:48.409 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:35:48.410 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:35:48.711 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$bvqySgwSNUiEv86gCALKN.x3mfnNMURK6LzC8NOGsHTBE8CLZL8wa
2025-02-06 04:35:48.711 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$GsajE8Ga1upxYCLCUUbnLO4Vgq6h21OZayLtB0TE9wPCU9kO8i9JO
2025-02-06 04:35:48.712 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:35:48.732 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:35:48.736 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:35:48.738 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:35:48.746 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:35:48.758 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:35:48.759 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:35:48.761 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:35:48.762 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:35:48.763 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:35:48.769 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:35:56.663 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:35:56.663 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:35:56.663 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:35:56.663 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:35:56.663 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:35:56.664 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5d7f4036
2025-02-06 04:35:56.664 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@45540b38
2025-02-06 04:35:56.665 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:35:56.665 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 04:35:56.678 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:35:56.684 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:35:56.686 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:35:56.688 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:35:56.699 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:35:56.913 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:35:56.915 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5240eb8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=306F7AD2120F1D6800FBC6F4328D0744], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:35:59.401 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:35:59.566 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:35:59.569 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:59.697 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:35:59.710 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from DE1AEB1BC30CBCA62BD2910A5949D9E2
2025-02-06 04:35:59.711 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4c24718f]
2025-02-06 04:35:59.713 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:35:59.713 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:35:59.721 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:35:59.722 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:35:59.723 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:35:59.723 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:35:59.723 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:35:59.746 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:35:59.749 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:35:59.753 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:35:59.755 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:59.758 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:59.761 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:59.762 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:59.768 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:35:59.770 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:59.774 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:59.776 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:35:59.779 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:35:59.799 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:35:59.997 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:36:06.019 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/20
2025-02-06 04:36:06.019 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:06.019 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/20
2025-02-06 04:36:06.020 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/20", parameters={}
2025-02-06 04:36:06.021 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:36:06.025 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 20
2025-02-06 04:36:06.033 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:36:06.037 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:06.044 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:36:06.045 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:06.046 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:06.047 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:06.048 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:06.051 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:36:06.088 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:06.089 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:06.091 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:06.092 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:06.098 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:06.100 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:06.103 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:36:24.284 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:36:24.284 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:24.284 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:36:24.285 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:36:24.285 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:36:24.296 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:24.299 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.305 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:36:24.307 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 20
2025-02-06 04:36:24.307 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:24.309 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.393 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:36:24.396 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:36:24.407 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:36:24.410 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:24.414 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - User null saved successfully
2025-02-06 04:36:24.419 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 04:36:24.429 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:36:24.432 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 04:36:24.432 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 04:36:24.436 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:36:24.436 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:24.436 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:36:24.436 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:36:24.437 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:36:24.437 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:36:24.438 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:36:24.445 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:36:24.449 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.453 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:24.455 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.456 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:24.462 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:36:24.464 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:24.466 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.467 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:24.468 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:24.472 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:36:24.488 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:36:30.902 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/20
2025-02-06 04:36:30.903 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:30.903 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/20
2025-02-06 04:36:30.903 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/20", parameters={}
2025-02-06 04:36:30.904 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:36:30.906 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 20
2025-02-06 04:36:30.907 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:36:30.911 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:30.917 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:36:30.919 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:30.922 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:30.925 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:30.927 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:30.934 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:36:30.944 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:30.947 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:30.951 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:30.953 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:30.958 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:30.960 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:30.965 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:36:36.779 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:36:36.779 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:36.780 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:36:36.780 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:36:36.780 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:36:36.784 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:36.786 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.789 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:36:36.790 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 20
2025-02-06 04:36:36.791 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:36.792 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.905 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:36:36.906 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:36:36.908 [http-nio-8081-exec-4] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:36:36.910 [http-nio-8081-exec-4] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:36:36.916 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:36:36.917 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:36.918 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.919 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:36.920 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.925 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:36:36.932 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:36.933 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.936 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:36.938 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.943 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:36.945 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:36.949 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:36:51.677 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:36:51.677 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:36:51.677 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:36:51.677 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:36:51.678 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:36:51.681 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:51.682 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.685 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:36:51.686 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 20
2025-02-06 04:36:51.687 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:51.689 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.789 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:36:51.789 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:36:51.790 [http-nio-8081-exec-5] ERROR r.k.s.b.d.services.UserServiceImpl - User with username null already exists
2025-02-06 04:36:51.791 [http-nio-8081-exec-5] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:166)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 04:36:51.794 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:36:51.795 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:51.796 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.797 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:36:51.798 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.800 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:36:51.814 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:51.816 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.820 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:51.823 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.827 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:36:51.829 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:36:51.831 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:01.382 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:37:01.382 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:01.382 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:37:01.382 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:37:01.383 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:37:01.383 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:37:01.384 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:37:01.385 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:37:01.388 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:01.391 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:01.393 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:01.396 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:01.400 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:37:01.401 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:01.404 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:01.405 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:01.407 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:01.410 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:01.420 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:10.582 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:37:10.583 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:37:10.583 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:37:10.583 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:10.584 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:10.588 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:10.588 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:13.235 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:13.238 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:13.465 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:37:13.476 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:13.485 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:13.506 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:13.506 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:13.507 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:13.509 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:13.515 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:13.515 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:15.535 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:15.536 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:15.683 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:37:15.684 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:15.690 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:15.690 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:15.690 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:15.691 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:15.692 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:15.696 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:15.696 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:18.182 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:18.184 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:18.290 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:37:18.290 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:18.296 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:18.296 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:18.297 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:18.297 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:18.297 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:18.299 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:18.299 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:20.206 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:20.208 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:20.297 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:37:20.298 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:20.301 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:20.302 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:20.302 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:20.302 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:20.303 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:20.305 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:20.305 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@339abb4c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:23.031 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:37:23.035 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:37:23.041 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:37:23.045 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:37:23.052 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:37:29.538 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 14220 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:37:29.544 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:37:29.546 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:37:29.686 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:37:29.686 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:37:31.208 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:37:31.332 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 107 ms. Found 2 JPA repository interfaces.
2025-02-06 04:37:32.391 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:37:32.417 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:37:32.417 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:37:32.506 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:37:32.506 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2818 ms
2025-02-06 04:37:32.903 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:37:33.011 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:37:33.073 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:37:33.594 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:37:33.651 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:37:33.922 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@67c41988
2025-02-06 04:37:33.926 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:37:34.077 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:37:35.523 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:37:35.638 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:37:36.103 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:37:37.247 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:37:37.379 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:37:37.486 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:37:37.495 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:37:37.631 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:37:37.714 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:37:37.808 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:37:37.909 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:37:38.131 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:37:38.186 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:37:38.200 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.111 seconds (process running for 11.893)
2025-02-06 04:37:38.216 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:37:38.305 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:37:38.379 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:38.394 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:38.398 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:38.404 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:38.429 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:37:38.463 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:37:38.468 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:37:38.473 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:37:38.478 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:37:38.486 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:37:38.488 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:37:38.490 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:38.491 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:38.495 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:37:38.497 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:37:38.502 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:37:38.510 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:37:38.530 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:37:38.531 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:37:38.843 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$8BEqNBInfabZAKZ67FvpsecG67lsfqC5KD/HoutvimY9kS.p9NwNW
2025-02-06 04:37:38.844 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$v6YOAM50ZUIdh.H4gWGLPeXH.c5Mo0JhCztfriUFumaKbCVuF63S2
2025-02-06 04:37:38.845 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:37:38.865 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:37:38.869 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:37:38.872 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:37:38.877 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:37:38.883 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:37:38.885 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:37:38.886 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:37:38.889 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:37:38.889 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:37:38.894 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:37:42.233 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:37:42.233 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:37:42.233 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:37:42.233 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:37:42.233 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:37:42.234 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1d80ce07
2025-02-06 04:37:42.235 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2c1498a3
2025-02-06 04:37:42.235 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:37:42.235 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 04:37:42.250 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:42.412 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:42.415 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:42.555 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-06 04:37:42.560 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:42.568 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:42.588 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:42.592 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:42.596 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:42.616 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:42.899 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:42.900 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@667ce7e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:46.709 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:46.711 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:46.714 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:46.810 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-06 04:37:46.810 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:37:46.814 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:46.815 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:46.815 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:46.815 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:46.816 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:46.819 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:46.819 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@667ce7e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:48.333 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:37:48.334 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:37:48.334 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:37:48.334 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:48.335 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:48.338 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:48.339 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@667ce7e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DE1AEB1BC30CBCA62BD2910A5949D9E2], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:53.180 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:53.182 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:53.186 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:53.323 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:37:53.336 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 90B2F8EE47D1AF44082C67203872BA86
2025-02-06 04:37:53.338 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27b1ce90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=90B2F8EE47D1AF44082C67203872BA86], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@170662eb]
2025-02-06 04:37:53.338 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27b1ce90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=90B2F8EE47D1AF44082C67203872BA86], Granted Authorities=[ROLE_USER]]
2025-02-06 04:37:53.338 [http-nio-8081-exec-5] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_USER]
2025-02-06 04:37:53.346 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 04:37:53.347 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27b1ce90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=90B2F8EE47D1AF44082C67203872BA86], Granted Authorities=[ROLE_USER]]]
2025-02-06 04:37:53.348 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 04:37:53.348 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 04:37:53.348 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 04:37:53.368 [http-nio-8081-exec-9] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 04:37:53.388 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:53.535 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:54.372 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 04:37:54.373 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27b1ce90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=90B2F8EE47D1AF44082C67203872BA86], Granted Authorities=[ROLE_USER]]]
2025-02-06 04:37:54.373 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27b1ce90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=90B2F8EE47D1AF44082C67203872BA86], Granted Authorities=[ROLE_USER]]]
2025-02-06 04:37:54.375 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session E6B3E5F7A7009BCE79B50AA0D04096BC
2025-02-06 04:37:54.376 [http-nio-8081-exec-8] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 04:37:54.386 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 04:37:54.387 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 04:37:54.387 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 04:37:54.388 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:37:54.388 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:54.394 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:37:54.395 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:37:59.605 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:37:59.606 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:37:59.608 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:59.737 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:37:59.738 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6cd4d3d]
2025-02-06 04:37:59.738 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:37:59.738 [http-nio-8081-exec-10] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:37:59.743 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:37:59.744 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:37:59.744 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:37:59.745 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:37:59.745 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:37:59.746 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:37:59.749 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:37:59.752 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:37:59.754 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:59.756 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:59.758 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:59.760 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:59.766 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:37:59.769 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:59.770 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:59.772 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:37:59.774 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:37:59.778 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:37:59.802 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:38:01.593 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/22
2025-02-06 04:38:01.593 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:38:01.593 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/22
2025-02-06 04:38:01.594 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/22", parameters={}
2025-02-06 04:38:01.594 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:38:01.598 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 22
2025-02-06 04:38:01.610 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:38:01.615 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:01.620 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:38:01.622 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:01.624 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:01.626 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:01.629 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:01.638 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:38:01.680 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:38:01.683 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:01.689 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:38:01.691 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:01.699 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:38:01.702 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:01.709 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:38:09.082 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:38:09.082 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:38:09.082 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:38:09.083 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:38:09.083 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:38:09.093 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:38:09.095 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.103 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:38:09.104 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 22
2025-02-06 04:38:09.104 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:38:09.106 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.207 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:38:09.211 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:38:09.216 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:38:09.217 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:09.219 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - User null saved successfully
2025-02-06 04:38:09.223 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 04:38:09.232 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:38:09.235 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 04:38:09.235 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 04:38:09.239 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:38:09.239 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:38:09.239 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:38:09.240 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:38:09.240 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:38:09.240 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:38:09.241 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:38:09.244 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:38:09.246 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.249 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:09.250 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.253 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:09.257 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:38:09.259 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:09.261 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.263 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:38:09.265 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:38:09.269 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:38:09.278 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:38:17.374 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:38:17.375 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:38:17.375 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:38:17.375 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:38:17.376 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:38:17.379 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:38:17.379 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:38:27.335 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:38:27.336 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:38:27.461 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user1'
2025-02-06 04:38:27.461 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:38:27.466 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:38:27.467 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:38:27.467 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:38:27.467 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:38:27.468 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:38:27.476 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:38:27.477 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@19490e40, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:40:10.050 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:40:10.055 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:40:10.059 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:40:10.063 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:40:10.070 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:40:15.951 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 28644 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:40:15.956 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:40:15.958 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:40:16.146 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:40:16.147 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:40:17.848 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:40:18.015 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 143 ms. Found 2 JPA repository interfaces.
2025-02-06 04:40:19.240 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:40:19.268 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:40:19.268 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:40:19.372 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:40:19.372 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3221 ms
2025-02-06 04:40:19.796 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:40:19.878 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:40:19.934 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:40:20.363 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:40:20.407 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:40:20.631 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6fc4ee99
2025-02-06 04:40:20.634 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:40:20.743 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:40:22.186 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:40:22.289 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:40:22.931 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:40:23.970 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:40:24.073 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:40:24.175 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:40:24.188 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:40:24.318 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:40:24.421 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:40:24.539 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:40:24.695 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:40:25.043 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:40:25.137 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:40:25.154 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.883 seconds (process running for 12.79)
2025-02-06 04:40:25.177 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:40:25.296 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:40:25.368 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:40:25.376 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:40:25.379 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:40:25.381 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:40:25.401 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:40:25.430 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:40:25.437 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:40:25.444 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:40:25.448 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:40:25.457 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:40:25.459 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:40:25.462 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:40:25.466 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:40:25.469 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:40:25.471 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:40:25.478 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:40:25.489 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:40:25.511 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:40:25.512 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:40:25.870 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$YFKqmB5niLditkRcgvlSPettDkQh8US/7kApohtRK9SpJG9j/Yxe6
2025-02-06 04:40:25.871 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$vwB3bQSiupI9WF4DLqyriu974aqrLX2FQ0zpmf8lChEB8h59Krxum
2025-02-06 04:40:25.872 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:40:25.903 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:40:25.908 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:40:25.911 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:40:25.918 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:40:25.926 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:40:25.928 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:40:25.931 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:40:25.935 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:40:25.935 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:40:25.940 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:41:28.521 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:41:28.532 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:41:28.543 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:41:28.549 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:41:28.564 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:41:37.778 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 12196 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:41:37.782 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:41:37.785 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:41:37.927 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:41:37.928 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:41:39.423 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:41:39.539 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2025-02-06 04:41:40.656 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:41:40.681 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:41:40.681 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:41:40.768 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:41:40.768 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2839 ms
2025-02-06 04:41:41.159 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:41:41.271 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:41:41.337 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:41:41.903 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:41:41.958 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:41:42.196 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@11f1c669
2025-02-06 04:41:42.199 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:41:42.312 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:41:43.711 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:41:43.813 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:41:44.286 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:41:45.158 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:41:45.254 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:41:45.335 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:41:45.341 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:41:45.447 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:41:45.501 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:41:45.561 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:41:45.644 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:41:45.840 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:41:45.899 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:41:45.909 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.194 seconds (process running for 12.188)
2025-02-06 04:41:45.924 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:41:46.002 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:41:46.047 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:41:46.054 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:41:46.056 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:41:46.059 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:41:46.074 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:41:46.098 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:41:46.103 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:41:46.109 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:41:46.115 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:41:46.123 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:41:46.126 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:41:46.128 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:41:46.130 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:41:46.134 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:41:46.135 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:41:46.140 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:41:46.149 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:41:46.166 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:41:46.168 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:41:46.450 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$V0WVng07J557kGIuwz17A.US.chAjdiIWTZJ/A7II2sgTwKaI/IFy
2025-02-06 04:41:46.450 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$DAkDj0wy0bYi1owjUL9Q2OA/UTFvmpzlrcP4IdvWj/i1vjnQv4p1y
2025-02-06 04:41:46.452 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:41:46.472 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:41:46.476 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:41:46.478 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:41:46.484 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:41:46.494 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:41:46.496 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:41:46.498 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:41:46.499 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:41:46.500 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:41:46.505 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:42:52.490 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:42:52.490 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:42:52.490 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:42:52.490 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:42:52.490 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:42:52.491 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4003ede
2025-02-06 04:42:52.491 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@31f7abc5
2025-02-06 04:42:52.493 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:42:52.493 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 04:42:52.508 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:42:52.664 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:42:52.667 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:52.781 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:42:52.804 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D5D468F9567E9DB17E01B6BF2AD30AB5
2025-02-06 04:42:52.806 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6acda7a0]
2025-02-06 04:42:52.806 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:42:52.806 [http-nio-8081-exec-1] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:42:52.827 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:42:52.843 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:42:52.845 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:42:52.852 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:42:52.854 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:42:52.880 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:42:52.885 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:42:52.888 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:42:52.890 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:52.893 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:52.894 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:52.896 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:52.902 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:42:52.905 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:52.906 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:52.909 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:52.910 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:52.937 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:42:53.470 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:42:57.784 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/26
2025-02-06 04:42:57.785 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:42:57.785 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/26
2025-02-06 04:42:57.785 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/26", parameters={}
2025-02-06 04:42:57.786 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:42:57.789 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 26
2025-02-06 04:42:57.798 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:42:57.799 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:57.804 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:42:57.807 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:57.809 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:57.810 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:42:57.811 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:57.814 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:42:57.842 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:42:57.844 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:57.848 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:42:57.849 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:57.853 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:42:57.855 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:42:57.857 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:43:11.278 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:43:11.279 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:43:11.279 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:43:11.279 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:43:11.279 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:43:11.287 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:43:11.289 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.295 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:43:11.296 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 26
2025-02-06 04:43:11.297 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:43:11.298 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.399 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:43:11.407 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:43:11.414 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:43:11.416 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:43:11.419 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - User null saved successfully
2025-02-06 04:43:11.425 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 04:43:11.436 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:43:11.439 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 04:43:11.441 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 04:43:11.452 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:43:11.453 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:43:11.453 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:43:11.453 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:43:11.453 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:43:11.454 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:43:11.455 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:43:11.457 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:43:11.460 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.462 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:43:11.464 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.466 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:43:11.470 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:43:11.471 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:43:11.473 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.474 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:43:11.478 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:43:11.480 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:43:11.490 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:43:16.363 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 04:43:16.364 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:43:16.364 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@18c1f9a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D5D468F9567E9DB17E01B6BF2AD30AB5], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:43:16.365 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session A1EC30644863029D659BF3FD94640E98
2025-02-06 04:43:16.365 [http-nio-8081-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 04:43:16.372 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 04:43:16.386 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 04:43:16.387 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 04:43:16.388 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:43:16.392 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:43:16.397 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:43:16.397 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:43:20.016 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:43:20.018 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:43:20.132 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user'
2025-02-06 04:43:20.135 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error=true
2025-02-06 04:43:20.139 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error=true
2025-02-06 04:43:20.140 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error=true
2025-02-06 04:43:20.140 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?error=true", parameters={masked}
2025-02-06 04:43:20.140 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:43:20.141 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:43:20.145 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:43:20.145 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:51:12.411 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 04:51:12.416 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 04:51:12.421 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:51:12.425 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 04:51:12.432 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 04:51:21.951 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 32788 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 04:51:21.955 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 04:51:21.957 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 04:51:22.079 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 04:51:22.080 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 04:51:23.509 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 04:51:23.638 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 2 JPA repository interfaces.
2025-02-06 04:51:24.626 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 04:51:24.647 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 04:51:24.648 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 04:51:24.725 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 04:51:24.726 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2645 ms
2025-02-06 04:51:25.006 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 04:51:25.102 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 04:51:25.154 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 04:51:25.615 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 04:51:25.664 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 04:51:25.877 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2921e2f5
2025-02-06 04:51:25.879 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 04:51:25.987 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 04:51:27.333 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 04:51:27.446 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 04:51:28.026 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 04:51:29.237 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 04:51:29.397 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 04:51:29.530 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 04:51:29.553 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 04:51:29.735 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 04:51:29.879 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 04:51:29.996 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 04:51:30.148 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 04:51:30.456 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 04:51:30.544 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 04:51:30.562 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.146 seconds (process running for 12.18)
2025-02-06 04:51:30.585 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 04:51:30.731 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:51:30.810 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:51:30.821 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:51:30.824 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:51:30.827 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:51:30.847 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 04:51:30.884 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:51:30.899 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 04:51:30.908 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:51:30.915 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 04:51:30.929 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 04:51:30.933 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:51:30.937 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:51:30.940 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:51:30.945 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:51:30.947 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 04:51:30.954 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 04:51:30.997 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:51:31.194 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 04:51:31.196 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 04:51:31.822 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$AxT4FiUu9PJNNpIPT6iFuukuveAjV7iYEWwLPlon7mijMlU06YQpi
2025-02-06 04:51:31.822 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$zN2XPi60M7NADTSHe/njiOrvbqp/i/10vlAq8k5o5VGuq7sF8Dd3S
2025-02-06 04:51:31.824 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 04:51:31.866 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:51:31.872 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:51:31.877 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 04:51:31.888 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:51:31.897 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 04:51:31.900 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 04:51:31.903 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 04:51:31.908 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 04:51:31.909 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 04:51:31.915 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 04:51:55.767 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 04:51:55.768 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 04:51:55.768 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 04:51:55.768 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 04:51:55.768 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 04:51:55.770 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@42e737df
2025-02-06 04:51:55.770 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@18722241
2025-02-06 04:51:55.771 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 04:51:55.771 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 04:51:55.795 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 04:51:55.811 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 04:51:55.814 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 04:51:55.818 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 04:51:55.834 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:51:56.139 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:51:56.142 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 04:52:00.318 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 04:52:00.460 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 04:52:00.462 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:00.563 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 04:52:00.575 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D31450C7F29A683E7217AD85046B11A3
2025-02-06 04:52:00.576 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@554947d8]
2025-02-06 04:52:00.577 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 04:52:00.577 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 04:52:00.584 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:52:00.585 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:52:00.586 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:52:00.586 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:52:00.587 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:52:00.606 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:52:00.610 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:52:00.614 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:52:00.616 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:00.618 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:00.619 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:00.621 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:00.628 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:52:00.630 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:00.631 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:00.633 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:00.634 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:00.650 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:52:00.776 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:52:03.817 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/28
2025-02-06 04:52:03.818 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:52:03.818 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/28
2025-02-06 04:52:03.818 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/28", parameters={}
2025-02-06 04:52:03.818 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 04:52:03.822 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 28
2025-02-06 04:52:03.831 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:52:03.833 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:03.837 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:52:03.838 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:03.839 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:03.841 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:03.842 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:03.845 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:52:03.879 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:52:03.882 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:03.885 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:52:03.887 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:03.892 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:52:03.893 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:03.896 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 04:52:22.154 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 04:52:22.154 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:52:22.154 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 04:52:22.155 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 04:52:22.155 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 04:52:22.163 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:52:22.165 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.169 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:52:22.172 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 28
2025-02-06 04:52:22.173 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name,
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        roles r1_0 
    left join
        users_roles u1_0 
            on r1_0.id=u1_0.role_id 
    left join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        r1_0.id=?
2025-02-06 04:52:22.175 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.276 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: null
2025-02-06 04:52:22.279 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username is null 
    limit
        ?
2025-02-06 04:52:22.284 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 04:52:22.286 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:22.288 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - User null saved successfully
2025-02-06 04:52:22.293 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 04:52:22.304 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : null
2025-02-06 04:52:22.307 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 04:52:22.307 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 04:52:22.313 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 04:52:22.313 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@406d0f8d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D31450C7F29A683E7217AD85046B11A3], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 04:52:22.313 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 04:52:22.313 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 04:52:22.314 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 04:52:22.314 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 04:52:22.315 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 04:52:22.316 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 04:52:22.318 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.319 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:22.321 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.323 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:22.327 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 04:52:22.329 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:22.331 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.333 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.role_id,
        u1_1.id,
        u1_1.age,
        u1_1.email,
        u1_1.first_name,
        u1_1.last_name,
        u1_1.password,
        u1_1.username 
    from
        users_roles u1_0 
    join
        users u1_1 
            on u1_1.id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-02-06 04:52:22.335 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 04:52:22.338 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 04:52:22.346 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:09:05.042 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 05:09:05.049 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 05:09:05.056 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:09:05.061 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 05:09:05.065 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 05:10:21.197 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 24908 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 05:10:21.201 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 05:10:21.203 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 05:10:21.339 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 05:10:21.339 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 05:10:22.733 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:10:22.839 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 91 ms. Found 2 JPA repository interfaces.
2025-02-06 05:10:23.610 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 05:10:23.634 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 05:10:23.634 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 05:10:23.721 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 05:10:23.721 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2380 ms
2025-02-06 05:10:23.826 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.InvalidClassException: ru.kata.spring.boot_security.demo.models.User; local class incompatible: stream classdesc serialVersionUID = 7456506218748261368, local class serialVersionUID = 5024959162345430863
	at java.base/java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:598)
	at java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2063)
	at java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1912)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2237)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1747)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2603)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2454)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2269)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1747)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2603)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2454)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2269)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1747)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2603)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2454)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2269)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1747)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:525)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:483)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1198)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:831)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4453)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:516)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:222)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-02-06 05:10:24.068 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:10:24.201 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 05:10:24.268 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:10:24.854 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:10:24.910 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 05:10:25.207 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f4ec5d5
2025-02-06 05:10:25.210 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 05:10:25.399 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:10:26.775 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:10:26.877 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:10:27.261 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:10:28.473 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 05:10:28.604 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 05:10:28.716 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 05:10:28.728 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 05:10:28.858 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 05:10:28.937 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 05:10:29.030 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 05:10:29.138 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 05:10:29.362 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 05:10:29.433 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 05:10:29.458 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 9.753 seconds (process running for 11.314)
2025-02-06 05:10:29.484 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 05:10:29.613 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:10:29.696 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:10:29.706 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:10:29.731 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 05:10:29.799 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:10:29.809 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:10:29.819 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:10:29.825 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:10:29.836 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 05:10:29.839 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:10:29.844 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:10:29.846 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:10:29.852 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 05:10:29.867 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:10:29.898 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 05:10:29.899 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:10:30.381 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$YlQpU8vf.3jFb7v3QrSCxu35hTvm.Meo9DwJnMYbDpcShfOy1CvPm
2025-02-06 05:10:30.381 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$OpbyU1uvgTv64SIRTKW5YORL/0Mkl8j9cO3aGdGBiYFS1YHtJopsS
2025-02-06 05:10:30.383 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 05:10:30.418 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:10:30.424 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:10:30.427 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 05:10:30.439 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:10:30.448 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:10:30.450 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:10:30.453 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:10:30.456 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 05:10:30.458 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:10:30.465 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 05:11:52.809 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 05:11:52.810 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 05:11:52.810 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 05:11:52.810 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 05:11:52.810 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 05:11:52.812 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2c96250c
2025-02-06 05:11:52.813 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@d93f251
2025-02-06 05:11:52.814 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 05:11:52.814 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-06 05:11:52.830 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 05:11:52.838 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 05:11:52.840 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 05:11:52.843 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 05:11:52.856 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:11:53.025 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:11:53.026 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:11:54.283 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 05:11:54.284 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 05:11:54.284 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 05:11:54.285 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:11:54.287 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:11:54.367 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:11:54.367 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:11:55.949 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:11:56.206 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:11:56.375 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:11:56.394 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1de47a0d]
2025-02-06 05:11:56.394 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:11:56.395 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:11:56.408 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:11:56.409 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:11:56.409 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:11:56.409 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:11:56.409 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:11:56.438 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:11:56.442 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:11:56.447 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:11:56.451 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:11:56.455 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:11:56.466 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:11:56.500 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:11:56.718 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:00.552 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/30
2025-02-06 05:12:00.553 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:00.553 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/30
2025-02-06 05:12:00.553 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/30", parameters={}
2025-02-06 05:12:00.554 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:12:00.557 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:12:00.565 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:12:00.570 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:00.573 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:00.606 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:00.609 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:00.613 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:00.616 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:06.499 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:12:06.499 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:06.499 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:12:06.499 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:12:06.499 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:12:06.508 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:06.513 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:12:06.514 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:12:06.516 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:12:06.519 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 30
2025-02-06 05:12:06.519 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:06.614 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:12:06.615 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:12:06.616 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:12:06.618 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:182)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:12:06.622 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:06.626 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:06.633 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:06.635 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:06.639 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:06.642 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:11.153 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:12:11.153 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:11.155 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:12:11.155 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:12:11.155 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:12:11.157 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:11.159 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:12:11.161 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:12:11.161 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:12:11.166 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 30
2025-02-06 05:12:11.167 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:11.260 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:12:11.261 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:12:11.265 [http-nio-8081-exec-7] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:12:11.268 [http-nio-8081-exec-7] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:182)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:12:11.275 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:11.278 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:11.286 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:11.289 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:11.293 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:11.295 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:15.279 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:12:15.279 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:15.279 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:12:15.280 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:12:15.280 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:12:15.283 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:15.286 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:12:15.288 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:12:15.289 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:12:15.294 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 30
2025-02-06 05:12:15.295 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:15.393 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:12:15.394 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:12:15.395 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:12:15.396 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:182)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:12:15.403 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:15.407 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:15.415 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:15.418 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:15.422 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:15.427 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:18.328 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/
2025-02-06 05:12:18.328 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:18.328 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/
2025-02-06 05:12:18.329 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/", parameters={}
2025-02-06 05:12:18.330 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 05:12:18.334 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 05:12:18.346 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-02-06 05:12:18.347 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 05:12:18.358 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 05:12:18.359 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:18.360 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 05:12:18.361 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 05:12:18.361 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 05:12:18.376 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 05:12:18.383 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 05:12:20.125 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:12:20.126 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:20.126 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:12:20.126 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:12:20.126 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:12:20.126 [http-nio-8081-exec-10] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:12:20.128 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:12:20.130 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:12:20.133 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:12:20.135 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:12:20.140 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:20.143 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:20.155 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:12:23.279 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/30
2025-02-06 05:12:23.279 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@43fb708c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:12:23.279 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/30
2025-02-06 05:12:23.279 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/30", parameters={}
2025-02-06 05:12:23.280 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:12:23.281 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:12:23.282 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:12:23.286 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:12:23.289 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:12:23.297 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:23.300 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:23.302 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:12:23.306 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:13:28.813 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 05:13:28.820 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 05:13:28.830 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:13:28.836 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 05:13:28.849 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 05:13:40.715 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 29700 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 05:13:40.718 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 05:13:40.719 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 05:13:40.874 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 05:13:40.875 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 05:13:42.740 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:13:42.875 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 116 ms. Found 2 JPA repository interfaces.
2025-02-06 05:13:43.844 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 05:13:43.865 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 05:13:43.866 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 05:13:43.940 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 05:13:43.941 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3065 ms
2025-02-06 05:13:44.261 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:13:44.342 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 05:13:44.396 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:13:44.848 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:13:44.897 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 05:13:45.128 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60f3c81a
2025-02-06 05:13:45.132 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 05:13:45.240 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:13:47.030 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:13:47.157 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:13:47.591 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:13:48.611 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 05:13:48.718 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 05:13:48.799 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 05:13:48.806 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 05:13:49.066 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 05:13:49.209 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 05:13:49.520 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 05:13:49.736 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 05:13:50.048 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 05:13:50.139 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 05:13:50.156 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.898 seconds (process running for 13.437)
2025-02-06 05:13:50.178 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 05:13:50.310 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:13:50.377 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:13:50.386 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:13:50.404 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 05:13:50.429 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:13:50.436 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:13:50.442 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:13:50.446 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:13:50.456 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 05:13:50.458 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:13:50.462 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:13:50.463 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:13:50.468 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 05:13:50.479 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:13:50.499 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 05:13:50.501 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:13:50.961 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$KNHmvwAar6.2Z61IS2JDmeGOlQsqrSyIlGPuvt1zfiycxU.HaDt3K
2025-02-06 05:13:50.962 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$d3h50Y6yDARuQdIMHEW1IOfCLWqasr/giUmsKQ4BlK5itlI8BoHWa
2025-02-06 05:13:50.965 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 05:13:51.024 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:13:51.034 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:13:51.040 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 05:13:51.059 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:13:51.075 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:13:51.079 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:13:51.085 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:13:51.089 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 05:13:51.092 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:13:51.100 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 05:13:53.668 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 05:13:53.669 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 05:13:53.669 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 05:13:53.669 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 05:13:53.669 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 05:13:53.686 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@187c9f2
2025-02-06 05:13:53.689 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1ec23938
2025-02-06 05:13:53.698 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 05:13:53.699 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 30 ms
2025-02-06 05:13:54.206 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/30
2025-02-06 05:13:54.269 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30277621, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:13:54.270 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/30
2025-02-06 05:13:54.283 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/30", parameters={}
2025-02-06 05:13:54.290 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:13:54.372 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 30
2025-02-06 05:13:54.397 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:13:54.406 [http-nio-8081-exec-1] ERROR r.k.s.b.d.c.AdminController - Error loading user with ID 30 for editing: User not found
java.lang.IllegalArgumentException: User not found
	at ru.kata.spring.boot_security.demo.controllers.AdminController.lambda$showEditUserPage$1(AdminController.java:135)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.showEditUserPage(AdminController.java:135)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:13:54.447 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 05:13:54.452 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 05:13:54.472 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:13:54.477 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30277621, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:13:54.479 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:13:54.479 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:13:54.480 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:13:54.486 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:13:54.491 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:13:54.498 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:13:54.504 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:13:54.509 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:13:54.525 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:13:54.550 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:13:55.540 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:14:01.606 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 05:14:01.606 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 05:14:01.606 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 05:14:01.607 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 05:14:01.610 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:14:01.616 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:14:01.616 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30277621, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:14:03.469 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 05:14:03.470 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 05:14:03.470 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 05:14:03.470 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:14:03.471 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:14:03.477 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:14:03.477 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30277621, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:14:04.653 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:14:04.928 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:14:05.112 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:14:05.128 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 6302672104FF9B83780185FB0BAE787C
2025-02-06 05:14:05.130 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7caaae3a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6ec89bf9]
2025-02-06 05:14:05.130 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7caaae3a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:14:05.131 [http-nio-8081-exec-5] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:14:05.140 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:14:05.140 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7caaae3a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:14:05.141 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:14:05.141 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:14:05.141 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:14:05.141 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:14:05.144 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:14:05.146 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:14:05.149 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:14:05.152 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:14:05.161 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:14:05.168 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:14:05.185 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:14:09.798 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/32
2025-02-06 05:14:09.799 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7caaae3a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:14:09.799 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/32
2025-02-06 05:14:09.799 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/32", parameters={}
2025-02-06 05:14:09.800 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:14:09.801 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 32
2025-02-06 05:14:09.802 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:14:09.810 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:14:09.813 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:14:09.841 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:09.844 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:09.847 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:09.850 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:14:27.137 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:14:27.138 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7caaae3a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:14:27.138 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:14:27.138 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:14:27.139 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:14:27.149 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:27.154 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:14:27.156 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 32
2025-02-06 05:14:27.157 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:14:27.161 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 32
2025-02-06 05:14:27.162 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:27.289 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:14:27.291 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:14:27.293 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:14:27.295 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:182)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:14:27.300 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:14:27.304 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:14:27.311 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:27.315 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:27.319 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:14:27.324 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:18:44.233 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 05:18:44.241 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 05:18:44.254 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:18:44.264 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 05:18:44.279 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 05:30:29.910 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 27892 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 05:30:29.915 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 05:30:29.917 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 05:30:30.073 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 05:30:30.074 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 05:30:31.928 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:30:32.090 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 136 ms. Found 2 JPA repository interfaces.
2025-02-06 05:30:33.300 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 05:30:33.332 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 05:30:33.332 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 05:30:33.422 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 05:30:33.423 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3347 ms
2025-02-06 05:30:33.802 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:30:33.909 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 05:30:33.973 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:30:34.466 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:30:34.520 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 05:30:34.793 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2dbc6111
2025-02-06 05:30:34.798 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 05:30:34.931 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:30:36.730 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:30:36.878 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:30:37.575 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:30:38.780 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 05:30:38.934 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 05:30:39.059 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 05:30:39.069 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 05:30:39.195 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 05:30:39.283 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 05:30:39.377 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 05:30:39.488 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 05:30:39.718 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 05:30:39.776 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 05:30:39.790 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 11.687 seconds (process running for 13.814)
2025-02-06 05:30:39.806 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 05:30:39.893 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:30:39.950 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:30:39.958 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:30:39.976 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 05:30:39.999 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:30:40.006 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:30:40.010 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:30:40.015 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:30:40.024 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 05:30:40.026 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:30:40.028 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:30:40.030 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:30:40.035 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 05:30:40.044 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:30:40.073 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 05:30:40.074 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:30:40.403 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$nLD.2HizYrqmq7jdCa1gy.8eRHOxga2whNryWT5JFY2nez4W/GJdu
2025-02-06 05:30:40.403 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$iTjPOLdviN63ePIhUs./ju0SwwBKFHg4F4c/.3hYZ6uCivZ2obega
2025-02-06 05:30:40.405 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 05:30:40.433 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:30:40.438 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:30:40.441 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 05:30:40.448 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:30:40.454 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:30:40.456 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:30:40.458 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:30:40.460 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 05:30:40.462 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:30:40.466 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 05:30:52.535 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 05:30:52.535 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 05:30:52.535 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 05:30:52.535 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 05:30:52.535 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 05:30:52.536 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7b3a023f
2025-02-06 05:30:52.536 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@58a1cecd
2025-02-06 05:30:52.537 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 05:30:52.537 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 05:30:52.556 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 05:30:52.565 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 05:30:52.568 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 05:30:52.570 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 05:30:52.584 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:30:52.769 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:30:52.770 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@52864eca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:30:54.328 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 05:30:54.329 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 05:30:54.330 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 05:30:54.330 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:30:54.331 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:30:54.384 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:30:54.384 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@52864eca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6302672104FF9B83780185FB0BAE787C], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:30:55.440 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:30:55.818 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:30:56.015 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:30:56.033 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from E426362A468642D061587FEECDEB0572
2025-02-06 05:30:56.035 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@522c6cd7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E426362A468642D061587FEECDEB0572], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@62743b29]
2025-02-06 05:30:56.035 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@522c6cd7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E426362A468642D061587FEECDEB0572], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:30:56.036 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:30:56.049 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:30:56.049 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@522c6cd7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E426362A468642D061587FEECDEB0572], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:30:56.050 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:30:56.050 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:30:56.051 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:30:56.086 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:30:56.091 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:30:56.095 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:30:56.099 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:30:56.101 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:30:56.112 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:30:56.140 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:30:56.366 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:30:58.472 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 05:30:58.474 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@522c6cd7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E426362A468642D061587FEECDEB0572], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:30:58.474 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@522c6cd7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E426362A468642D061587FEECDEB0572], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:30:58.476 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session DAB178A87D092D30EE663F86B0399F48
2025-02-06 05:30:58.478 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 05:30:58.489 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 05:30:58.515 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 05:30:58.516 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 05:30:58.517 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:30:58.519 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:30:58.530 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:30:58.530 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:30:59.636 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:30:59.640 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:30:59.902 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:30:59.906 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@777f6546]
2025-02-06 05:30:59.906 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:30:59.907 [http-nio-8081-exec-7] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:31:00.268 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:31:00.269 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:00.270 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:31:00.270 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:31:00.271 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:31:00.272 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:31:00.275 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:31:00.278 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:31:00.284 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:31:00.288 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:31:00.296 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:00.300 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:00.328 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:01.838 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/34
2025-02-06 05:31:01.839 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:01.839 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/34
2025-02-06 05:31:01.839 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/34", parameters={}
2025-02-06 05:31:01.840 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:31:01.846 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:01.860 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:01.870 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:01.877 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:01.926 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:01.932 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:01.937 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:01.943 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:13.738 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:13.738 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:13.738 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:13.739 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:13.739 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:13.746 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:13.753 [http-nio-8081-exec-10] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:13.754 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:13.754 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:13.759 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 34
2025-02-06 05:31:13.759 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:13.760 [http-nio-8081-exec-10] WARN  r.k.s.b.d.c.AdminController -   ID 34  
2025-02-06 05:31:13.870 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:13.871 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:13.873 [http-nio-8081-exec-10] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:13.874 [http-nio-8081-exec-10] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:13.879 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:13.882 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:13.894 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:13.899 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:13.904 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:13.908 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:24.483 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:24.484 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:24.484 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:24.484 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:24.484 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:24.487 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:24.490 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:24.491 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:24.492 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:24.496 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 34
2025-02-06 05:31:24.497 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:24.499 [http-nio-8081-exec-1] WARN  r.k.s.b.d.c.AdminController -   ID 34  
2025-02-06 05:31:24.599 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:24.601 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:24.602 [http-nio-8081-exec-1] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:24.602 [http-nio-8081-exec-1] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:24.610 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:24.614 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:24.620 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:24.623 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:24.627 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:24.633 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:25.993 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:25.993 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:25.993 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:25.994 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:25.994 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:25.997 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:26.000 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:26.001 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:26.001 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:26.006 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 34
2025-02-06 05:31:26.006 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:26.008 [http-nio-8081-exec-3] WARN  r.k.s.b.d.c.AdminController -   ID 34  
2025-02-06 05:31:26.097 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:26.098 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:26.099 [http-nio-8081-exec-3] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:26.100 [http-nio-8081-exec-3] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:26.104 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:26.106 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:26.112 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:26.116 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:26.119 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:26.122 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:43.660 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:43.660 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:43.660 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:43.660 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:43.660 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:43.663 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:43.666 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:43.667 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:43.668 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:43.671 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 34
2025-02-06 05:31:43.672 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:43.674 [http-nio-8081-exec-2] WARN  r.k.s.b.d.c.AdminController -   ID 34  
2025-02-06 05:31:43.760 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:43.762 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:43.763 [http-nio-8081-exec-2] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:43.763 [http-nio-8081-exec-2] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:43.765 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:43.768 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:43.774 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:43.778 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:43.782 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:43.786 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:45.193 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:45.193 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:45.193 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:45.193 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:45.194 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:45.197 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:45.200 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:45.200 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:45.202 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:45.205 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 33
2025-02-06 05:31:45.205 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:45.300 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:45.301 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:45.302 [http-nio-8081-exec-4] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:45.303 [http-nio-8081-exec-4] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:45.305 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:45.307 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:45.312 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:45.316 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:45.319 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:45.322 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:31:46.846 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:31:46.846 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@be4c9a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:31:46.846 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:31:46.846 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:31:46.847 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:31:46.850 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:46.853 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:31:46.854 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 34
2025-02-06 05:31:46.855 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:31:46.860 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 34
2025-02-06 05:31:46.860 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:46.862 [http-nio-8081-exec-5] WARN  r.k.s.b.d.c.AdminController -   ID 34  
2025-02-06 05:31:46.959 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:31:46.960 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:31:46.961 [http-nio-8081-exec-5] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:31:46.962 [http-nio-8081-exec-5] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:31:46.965 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:31:46.967 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:31:46.973 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:46.976 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:46.980 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:31:46.983 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:35:29.580 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 05:35:29.586 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 05:35:29.595 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:35:29.600 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 05:35:29.610 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 05:35:47.382 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 12700 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 05:35:47.388 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 05:35:47.390 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 05:35:47.568 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 05:35:47.570 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 05:35:49.975 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:35:50.154 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 149 ms. Found 2 JPA repository interfaces.
2025-02-06 05:35:51.476 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 05:35:51.535 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 05:35:51.536 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 05:35:51.676 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 05:35:51.678 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4105 ms
2025-02-06 05:35:52.216 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:35:52.339 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 05:35:52.429 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:35:53.198 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:35:53.310 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 05:35:53.856 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@49334fca
2025-02-06 05:35:53.860 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 05:35:54.038 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:35:55.737 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:35:55.867 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:35:56.491 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:35:58.157 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 05:35:58.334 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 05:35:58.468 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 05:35:58.480 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 05:35:58.717 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 05:35:58.869 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 05:35:59.007 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 05:35:59.162 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 05:35:59.655 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 05:35:59.799 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 05:35:59.825 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 14.732 seconds (process running for 17.769)
2025-02-06 05:35:59.852 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 05:36:00.067 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:36:00.200 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:36:00.212 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:36:00.243 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 05:36:00.291 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:36:00.303 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:36:00.312 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:36:00.318 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:36:00.329 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 05:36:00.332 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:36:00.337 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:36:00.339 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:36:00.347 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 05:36:00.362 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:36:00.394 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 05:36:00.395 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:36:01.194 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$XfNGIaFQ1PPJbY5l1V9tMuwSOZZYBdvnZMdEvPqj4uFkrz/5Y5kKu
2025-02-06 05:36:01.194 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$b9NBULGy4ePG2SNyuMWyP..aSYZcv.5EfNq3rWl0LyBC2d/eNtl.y
2025-02-06 05:36:01.196 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 05:36:01.250 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:36:01.256 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:36:01.262 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 05:36:01.277 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:36:01.290 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:36:01.293 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:36:01.297 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:36:01.300 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 05:36:01.303 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:36:01.310 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 05:36:04.855 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 05:36:04.855 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 05:36:04.855 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 05:36:04.857 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 05:36:04.857 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 05:36:04.857 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@18b88f8e
2025-02-06 05:36:04.859 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@34c2a57d
2025-02-06 05:36:04.859 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 05:36:04.859 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-06 05:36:04.881 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 05:36:04.892 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 05:36:04.895 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 05:36:04.899 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 05:36:04.916 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:36:05.202 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:36:05.203 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d04443, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:36:06.710 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 05:36:06.712 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 05:36:06.712 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 05:36:06.713 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:36:06.716 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:36:06.829 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:36:06.830 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d04443, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:36:08.626 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:36:09.039 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:36:09.273 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:36:09.297 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from F15B3E2FBAA23460543FF2AC6EFEB219
2025-02-06 05:36:09.299 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d2c2ea0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@79779ca5]
2025-02-06 05:36:09.301 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d2c2ea0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:36:09.302 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:36:09.315 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:36:09.316 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d2c2ea0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:36:09.317 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:36:09.317 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:36:09.317 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:36:09.355 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:36:09.362 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:36:09.364 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:36:09.368 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:36:09.372 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:36:09.380 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:36:09.412 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:36:09.638 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:36:11.443 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/36
2025-02-06 05:36:11.444 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d2c2ea0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:36:11.445 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/36
2025-02-06 05:36:11.445 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/36", parameters={}
2025-02-06 05:36:11.447 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:36:11.452 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 36
2025-02-06 05:36:11.468 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:36:11.477 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:36:11.483 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:36:11.549 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:11.556 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:11.562 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:11.570 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:36:18.638 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:36:18.639 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@3d2c2ea0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:36:18.639 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:36:18.639 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:36:18.639 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:36:18.653 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:18.660 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController -   : user
2025-02-06 05:36:18.662 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 36
2025-02-06 05:36:18.663 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:36:18.670 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 36
2025-02-06 05:36:18.672 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:18.675 [http-nio-8081-exec-6] WARN  r.k.s.b.d.c.AdminController -   ID 36  
2025-02-06 05:36:18.815 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:36:18.817 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:36:18.820 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:36:18.823 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController -    : User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:181)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:36:18.835 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:36:18.839 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:36:18.851 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:18.856 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:18.862 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:36:18.870 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:51:40.260 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 05:51:40.277 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 05:51:40.296 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:51:40.311 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 05:51:40.317 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 05:54:56.189 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 18756 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 05:54:56.193 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 05:54:56.195 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 05:54:56.293 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 05:54:56.293 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 05:54:57.487 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:54:57.591 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89 ms. Found 2 JPA repository interfaces.
2025-02-06 05:54:58.478 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 05:54:58.498 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 05:54:58.498 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 05:54:58.571 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 05:54:58.571 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2277 ms
2025-02-06 05:54:58.862 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:54:58.941 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 05:54:58.992 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:54:59.415 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:54:59.458 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 05:54:59.682 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4a1c6e29
2025-02-06 05:54:59.684 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 05:54:59.803 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:55:01.067 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:55:01.158 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:55:01.561 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:55:02.420 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 05:55:02.524 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 05:55:02.601 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 05:55:02.608 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 05:55:02.706 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 05:55:02.764 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 05:55:02.840 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 05:55:02.933 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 05:55:03.143 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 05:55:03.194 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 05:55:03.206 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 8.285 seconds (process running for 9.865)
2025-02-06 05:55:03.220 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 05:55:03.301 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:55:03.347 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:55:03.352 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:55:03.366 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 05:55:03.386 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:55:03.391 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 05:55:03.395 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:55:03.399 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 05:55:03.406 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 05:55:03.408 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:55:03.410 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:55:03.412 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 05:55:03.418 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 05:55:03.428 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:55:03.446 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 05:55:03.448 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 05:55:03.752 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$Y7lNNJc8sKb.3BlcvR7XIOUbVMDuVqqwkKtO5XBxfZB7apvQmNYnS
2025-02-06 05:55:03.753 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$L1aIDnXk2QiHrR/4uoQd6eowwSDCmPajap0OOw5SrfqqI.CPB7T/y
2025-02-06 05:55:03.754 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 05:55:03.776 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:55:03.780 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:55:03.788 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 05:55:03.795 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:55:03.801 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:55:03.803 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:55:03.804 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 05:55:03.807 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 05:55:03.807 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 05:55:03.813 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 05:55:37.178 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 05:55:37.179 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 05:55:37.179 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 05:55:37.179 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 05:55:37.179 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 05:55:37.183 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5b76ff02
2025-02-06 05:55:37.184 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@e48491c
2025-02-06 05:55:37.185 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 05:55:37.185 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-06 05:55:37.233 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 05:55:37.269 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 05:55:37.277 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 05:55:37.282 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 05:55:37.317 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:55:37.748 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:55:37.750 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c383ad3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:55:39.235 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 05:55:39.237 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 05:55:39.237 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 05:55:39.239 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:55:39.245 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:55:39.338 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:55:39.339 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c383ad3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F15B3E2FBAA23460543FF2AC6EFEB219], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:55:40.721 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:55:41.230 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:55:41.520 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:55:41.542 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 0CD1DD8EAE2F614E56BE210387103834
2025-02-06 05:55:41.545 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@792086d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0CD1DD8EAE2F614E56BE210387103834], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6d762dff]
2025-02-06 05:55:41.545 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@792086d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0CD1DD8EAE2F614E56BE210387103834], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:55:41.546 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:55:41.561 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:55:41.563 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@792086d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0CD1DD8EAE2F614E56BE210387103834], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:55:41.563 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:55:41.564 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:55:41.564 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:55:41.598 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:55:41.602 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:55:41.607 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:55:41.610 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:55:41.613 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:55:41.623 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:55:41.653 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:55:41.944 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:21.803 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 05:56:21.803 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@792086d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0CD1DD8EAE2F614E56BE210387103834], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:21.803 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@792086d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0CD1DD8EAE2F614E56BE210387103834], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:21.804 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 79D18E929765CFA2E8E675F56BDBFD3A
2025-02-06 05:56:21.806 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 05:56:21.811 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 05:56:21.825 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 05:56:21.825 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 05:56:21.826 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:56:21.827 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:21.832 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:21.833 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:56:27.461 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:56:27.463 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:56:27.581 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:56:27.582 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7d970bb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5f8ed693]
2025-02-06 05:56:27.582 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7d970bb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-02-06 05:56:27.582 [http-nio-8081-exec-7] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_USER]
2025-02-06 05:56:27.588 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 05:56:27.589 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7d970bb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:27.589 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 05:56:27.589 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 05:56:27.589 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 05:56:27.590 [http-nio-8081-exec-8] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 05:56:27.591 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:27.602 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:34.728 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 05:56:34.729 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7d970bb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:34.729 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@7d970bb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:34.729 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 23FD98BC6A6FE85B49E8EE42FD289BDA
2025-02-06 05:56:34.729 [http-nio-8081-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 05:56:34.737 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 05:56:34.737 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 05:56:34.738 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 05:56:34.738 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:56:34.739 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:34.744 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:34.745 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:56:38.119 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:56:38.120 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:56:38.221 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:56:38.221 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1a5546d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@59d4ba7]
2025-02-06 05:56:38.221 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1a5546d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-02-06 05:56:38.221 [http-nio-8081-exec-1] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_USER]
2025-02-06 05:56:38.227 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 05:56:38.227 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1a5546d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:38.227 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 05:56:38.227 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 05:56:38.227 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 05:56:38.228 [http-nio-8081-exec-2] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 05:56:38.228 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:38.235 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:39.416 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 05:56:39.417 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1a5546d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:39.417 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1a5546d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 05:56:39.417 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session B75A8607CABA1B78691F4428174E1060
2025-02-06 05:56:39.418 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 05:56:39.428 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 05:56:39.429 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 05:56:39.429 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 05:56:39.430 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 05:56:39.433 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:39.438 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:39.439 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 05:56:47.060 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 05:56:47.060 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 05:56:47.158 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 05:56:47.158 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@754db964]
2025-02-06 05:56:47.158 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 05:56:47.158 [http-nio-8081-exec-9] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 05:56:47.163 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 05:56:47.164 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 05:56:47.165 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 05:56:47.167 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:56:47.169 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 05:56:47.177 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:47.182 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:47.194 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:48.475 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/38
2025-02-06 05:56:48.475 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:48.475 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/38
2025-02-06 05:56:48.475 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/38", parameters={}
2025-02-06 05:56:48.476 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 05:56:48.481 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:48.487 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:48.496 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:48.501 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:48.533 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:48.537 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:48.540 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:48.542 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:57.663 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:57.663 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:57.663 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:57.663 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:57.663 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:57.671 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:57.677 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:57.678 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:57.679 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:57.683 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:57.684 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:57.789 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:56:57.790 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:56:57.792 [http-nio-8081-exec-4] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:56:57.794 [http-nio-8081-exec-4] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:56:57.798 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:57.801 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:57.807 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:57.811 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:57.814 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:57.818 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:59.172 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.172 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.172 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.173 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.173 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.178 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.182 [http-nio-8081-exec-10] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:59.183 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:59.185 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:59.190 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:59.190 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.357 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.358 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.358 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.358 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.359 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.363 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.367 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:59.369 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:59.369 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:59.371 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:56:59.374 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:56:59.376 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:59.376 [http-nio-8081-exec-10] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:56:59.377 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.381 [http-nio-8081-exec-10] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:56:59.384 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:59.388 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:59.400 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.405 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.410 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.415 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:59.521 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.522 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.522 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.522 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.522 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.529 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.534 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:59.538 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:59.539 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:59.544 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:59.545 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.569 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:56:59.571 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:56:59.573 [http-nio-8081-exec-1] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:56:59.575 [http-nio-8081-exec-1] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:56:59.580 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:59.584 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:59.594 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.600 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.607 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.611 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:59.674 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.674 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.674 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.674 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.675 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.681 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.686 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:59.688 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:59.689 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:59.696 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:59.697 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.773 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:56:59.775 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:56:59.777 [http-nio-8081-exec-2] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:56:59.778 [http-nio-8081-exec-2] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:56:59.781 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:59.785 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:59.793 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.799 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.806 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.811 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:56:59.829 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.829 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.829 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.830 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.830 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.835 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.840 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:56:59.841 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:56:59.843 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:56:59.849 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:56:59.850 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.942 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:56:59.946 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:56:59.948 [http-nio-8081-exec-3] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:56:59.951 [http-nio-8081-exec-3] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:56:59.957 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:56:59.964 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:56:59.977 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.979 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:56:59.980 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:56:59.980 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:56:59.980 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:56:59.981 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:56:59.985 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.986 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:56:59.991 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.010 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.011 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.012 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.020 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.021 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.024 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.121 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.121 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.121 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.121 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.122 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.128 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.137 [http-nio-8081-exec-9] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.143 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.145 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.152 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.153 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.223 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.225 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.228 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.229 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.233 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.240 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.251 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.255 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.256 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.256 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.256 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.257 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.257 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.262 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.265 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.269 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.270 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.271 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.271 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.277 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.277 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.373 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.378 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.381 [http-nio-8081-exec-5] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.382 [http-nio-8081-exec-5] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.388 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.393 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.404 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.410 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.413 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.414 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.416 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.417 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.418 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.419 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.425 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.425 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.430 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.431 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.432 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.439 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.440 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.493 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.497 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.500 [http-nio-8081-exec-9] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.501 [http-nio-8081-exec-9] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.507 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.513 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.526 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.531 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.538 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.545 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.559 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.560 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.560 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.560 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.561 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.564 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.569 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.571 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.572 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.580 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.582 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.621 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.623 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.625 [http-nio-8081-exec-7] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.627 [http-nio-8081-exec-7] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.631 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.637 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.649 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.655 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.663 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.669 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.717 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.718 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.718 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.718 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.719 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.723 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.730 [http-nio-8081-exec-10] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.732 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.733 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.741 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.742 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.785 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.788 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.791 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.793 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.799 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.806 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.818 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.827 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.838 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.846 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:00.884 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:00.884 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:00.885 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:00.885 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:00.886 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:00.890 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.894 [http-nio-8081-exec-1] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:00.896 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:00.898 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:00.905 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:00.906 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:00.960 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:00.963 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:00.965 [http-nio-8081-exec-4] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:00.967 [http-nio-8081-exec-4] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:00.971 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:00.977 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:00.995 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.006 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.017 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.024 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.026 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:01.026 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:01.026 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:01.027 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:01.027 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:01.031 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.036 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:01.039 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:01.040 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:01.048 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:01.049 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.101 [http-nio-8081-exec-10] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.104 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.106 [http-nio-8081-exec-10] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.107 [http-nio-8081-exec-10] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.111 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.117 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.128 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.134 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.142 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.148 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.201 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:01.202 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:01.203 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:01.203 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:01.203 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:01.208 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.212 [http-nio-8081-exec-3] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:01.214 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:01.215 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:01.224 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:01.225 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.249 [http-nio-8081-exec-1] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.251 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.253 [http-nio-8081-exec-1] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.254 [http-nio-8081-exec-1] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.261 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.266 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.278 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.285 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.291 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.298 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.339 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:01.340 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:01.340 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:01.340 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:01.341 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:01.345 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.350 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:01.352 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:01.352 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:01.360 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:01.361 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.391 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.393 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.397 [http-nio-8081-exec-2] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.398 [http-nio-8081-exec-2] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.403 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.407 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.413 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.419 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.425 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.429 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.494 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:01.494 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:01.495 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:01.495 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:01.495 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:01.499 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.504 [http-nio-8081-exec-5] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:01.506 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:01.507 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:01.512 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:01.513 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.527 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.529 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.531 [http-nio-8081-exec-3] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.531 [http-nio-8081-exec-3] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.533 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.538 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.546 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.550 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.554 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.561 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.623 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.625 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.627 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.628 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.631 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.635 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.646 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.651 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.659 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.664 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.671 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 05:57:01.671 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@27bccf5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 05:57:01.671 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 05:57:01.671 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 05:57:01.672 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 05:57:01.676 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.681 [http-nio-8081-exec-9] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 05:57:01.683 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 38
2025-02-06 05:57:01.685 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 05:57:01.691 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 38
2025-02-06 05:57:01.691 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.751 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.753 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.755 [http-nio-8081-exec-5] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.756 [http-nio-8081-exec-5] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.760 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.765 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.772 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.779 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.784 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.788 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 05:57:01.922 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 05:57:01.923 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 05:57:01.926 [http-nio-8081-exec-9] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 05:57:01.926 [http-nio-8081-exec-9] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 05:57:01.929 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 05:57:01.932 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 05:57:01.940 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.944 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.949 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 05:57:01.952 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:01:46.217 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 06:01:46.221 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 06:01:46.228 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 06:01:46.233 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 06:01:46.235 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 06:01:57.618 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 26104 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 06:01:57.624 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 06:01:57.627 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 06:01:57.803 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 06:01:57.804 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 06:02:01.734 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 06:02:01.919 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 159 ms. Found 2 JPA repository interfaces.
2025-02-06 06:02:03.661 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 06:02:03.698 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 06:02:03.699 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 06:02:03.832 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 06:02:03.832 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6027 ms
2025-02-06 06:02:04.336 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 06:02:04.454 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 06:02:04.522 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 06:02:05.226 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 06:02:05.292 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 06:02:05.638 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57e641b4
2025-02-06 06:02:05.643 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 06:02:05.831 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 06:02:08.540 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 06:02:08.652 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 06:02:09.137 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 06:02:11.689 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 06:02:12.020 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 06:02:12.215 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 06:02:12.228 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 06:02:12.435 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 06:02:12.517 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 06:02:12.600 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 06:02:12.731 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 06:02:13.060 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 06:02:13.128 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 06:02:13.143 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 17.675 seconds (process running for 19.873)
2025-02-06 06:02:13.161 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 06:02:13.268 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 06:02:13.330 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 06:02:13.337 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 06:02:13.358 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 06:02:13.389 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 06:02:13.396 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 06:02:13.402 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 06:02:13.406 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 06:02:13.415 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 06:02:13.417 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:13.420 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 06:02:13.423 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 06:02:13.428 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 06:02:13.438 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 06:02:13.458 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 06:02:13.460 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 06:02:13.782 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$pRZayYBG6FIUmzn93lMgJuSXATzYkrsCW/vvc8PiUAgXtwSAwKUJO
2025-02-06 06:02:13.782 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$ZbkAkt40syI.BXGxObbApuw.fxLbOpIF7vkBozHzNyus8dehoqu3C
2025-02-06 06:02:13.783 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 06:02:13.806 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:13.810 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 06:02:13.812 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 06:02:13.819 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 06:02:13.827 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 06:02:13.829 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:13.831 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 06:02:13.833 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 06:02:13.833 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 06:02:13.838 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 06:02:15.544 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 06:02:15.545 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 06:02:15.545 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 06:02:15.545 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 06:02:15.545 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 06:02:15.547 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48dbbfaf
2025-02-06 06:02:15.548 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@348a0247
2025-02-06 06:02:15.548 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 06:02:15.548 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 06:02:15.566 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 06:02:15.575 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 06:02:15.578 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 06:02:15.581 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 06:02:15.596 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:15.811 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:15.812 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@290f070, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:17.429 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 06:02:17.430 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 06:02:17.430 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 06:02:17.431 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 06:02:17.433 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:17.487 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:17.487 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@290f070, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:19.163 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 06:02:19.443 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 06:02:19.625 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 06:02:19.641 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 016C1F752913A61DF74B90266C94C416
2025-02-06 06:02:19.643 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5cf28ba1]
2025-02-06 06:02:19.644 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 06:02:19.644 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 06:02:19.656 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 06:02:19.658 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:19.658 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 06:02:19.658 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 06:02:19.659 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 06:02:19.689 [http-nio-8081-exec-4] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 06:02:19.695 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 06:02:19.698 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 06:02:19.703 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 06:02:19.707 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 06:02:19.717 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:19.752 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:19.944 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:22.032 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/40
2025-02-06 06:02:22.033 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:22.033 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/40
2025-02-06 06:02:22.033 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/40", parameters={}
2025-02-06 06:02:22.035 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 06:02:22.037 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 40
2025-02-06 06:02:22.047 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 06:02:22.052 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:22.055 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:22.089 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:22.092 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:22.096 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:22.099 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:26.690 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 06:02:26.690 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:26.690 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 06:02:26.690 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 06:02:26.691 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 06:02:26.704 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:26.711 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 06:02:26.712 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 40
2025-02-06 06:02:26.713 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 06:02:26.720 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 40
2025-02-06 06:02:26.721 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:26.881 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 06:02:26.883 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:26.886 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 06:02:26.889 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 06:02:26.895 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:26.899 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:26.911 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:26.916 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:26.922 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:26.928 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:27.950 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 06:02:27.951 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:27.951 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 06:02:27.952 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 06:02:27.952 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 06:02:27.958 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:27.962 [http-nio-8081-exec-7] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 06:02:27.965 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 40
2025-02-06 06:02:27.967 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 06:02:27.974 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 40
2025-02-06 06:02:27.975 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.162 [http-nio-8081-exec-7] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 06:02:28.167 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:28.170 [http-nio-8081-exec-7] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 06:02:28.171 [http-nio-8081-exec-7] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 06:02:28.176 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:28.183 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:28.199 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 06:02:28.200 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:28.200 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 06:02:28.200 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 06:02:28.201 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.201 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 06:02:28.208 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.213 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.218 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.218 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 06:02:28.219 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 40
2025-02-06 06:02:28.220 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 06:02:28.225 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:28.229 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 40
2025-02-06 06:02:28.230 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.467 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 06:02:28.469 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:28.471 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 06:02:28.471 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 06:02:28.476 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:28.480 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:28.492 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.497 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.502 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.509 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 06:02:28.967 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 06:02:28.968 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@675bf633, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=016C1F752913A61DF74B90266C94C416], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 06:02:28.968 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 06:02:28.968 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 06:02:28.968 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 06:02:28.975 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:28.980 [http-nio-8081-exec-9] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 06:02:28.981 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 40
2025-02-06 06:02:28.983 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 06:02:28.991 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 40
2025-02-06 06:02:28.992 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:29.158 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 06:02:29.159 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 06:02:29.161 [http-nio-8081-exec-9] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 06:02:29.162 [http-nio-8081-exec-9] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:154)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 06:02:29.166 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 06:02:29.170 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 06:02:29.181 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:29.186 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:29.192 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 06:02:29.197 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:35:45.761 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 14:35:45.771 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 14:35:45.784 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 14:35:45.796 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 14:35:45.798 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 14:48:07.797 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 17352 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 14:48:07.800 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 14:48:07.802 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 14:48:07.954 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 14:48:07.954 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 14:48:10.404 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 14:48:10.668 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 228 ms. Found 2 JPA repository interfaces.
2025-02-06 14:48:12.245 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 14:48:12.280 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 14:48:12.281 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 14:48:12.411 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 14:48:12.411 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4455 ms
2025-02-06 14:48:12.765 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 14:48:12.924 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 14:48:13.018 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 14:48:13.577 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 14:48:13.634 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 14:48:13.874 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5375c9ce
2025-02-06 14:48:13.877 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 14:48:14.027 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 14:48:15.739 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 14:48:15.868 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 14:48:16.360 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 14:48:17.437 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 14:48:17.548 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 14:48:17.636 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-02-06 14:48:17.645 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 14:48:17.785 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 14:48:17.862 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 14:48:17.968 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 14:48:18.119 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 14:48:18.356 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 14:48:18.430 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 14:48:18.445 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 12.493 seconds (process running for 15.052)
2025-02-06 14:48:18.463 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Deleting all users
2025-02-06 14:48:18.567 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 14:48:18.637 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 14:48:18.647 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 14:48:18.666 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users deleted
2025-02-06 14:48:18.690 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 14:48:18.698 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 14:48:18.703 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 14:48:18.708 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 14:48:18.717 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 14:48:18.719 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 14:48:18.723 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 14:48:18.726 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 14:48:18.730 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 14:48:18.740 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 14:48:18.761 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 14:48:18.762 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 14:48:19.103 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$VEt.eXKlRPgbghkc2iSMxuw3mQkmzKro2Ycpb7ERKZFp.dpwTIXJe
2025-02-06 14:48:19.103 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$iuJOW0uynPqGpYJL5LVMxesLJ92bO4EI8QJnALdhXEJkIpYfOFXNC
2025-02-06 14:48:19.105 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: admin
2025-02-06 14:48:19.132 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 14:48:19.136 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 14:48:19.140 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User admin saved successfully
2025-02-06 14:48:19.148 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 14:48:19.155 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 14:48:19.157 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 14:48:19.160 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 14:48:19.163 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User user saved successfully
2025-02-06 14:48:19.163 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 14:48:19.168 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 14:49:25.437 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 14:49:25.437 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 14:49:25.438 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 14:49:25.438 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 14:49:25.438 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 14:49:25.440 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7f043f39
2025-02-06 14:49:25.440 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4fb7038e
2025-02-06 14:49:25.441 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 14:49:25.441 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 14:49:25.461 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 14:49:25.469 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 14:49:25.472 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 14:49:25.476 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 14:49:25.492 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:25.715 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:49:25.717 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 14:49:28.025 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 14:49:28.026 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 14:49:28.026 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 14:49:28.027 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 14:49:28.030 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:28.116 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:49:28.116 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 14:49:29.373 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 14:49:29.608 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 14:49:29.752 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 14:49:29.775 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@411a7fc2]
2025-02-06 14:49:29.776 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 14:49:29.776 [http-nio-8081-exec-4] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 14:49:29.785 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 14:49:29.785 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 14:49:29.786 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 14:49:29.786 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 14:49:29.786 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 14:49:29.808 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - Authenticated admin: admin
2025-02-06 14:49:29.812 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching all users
2025-02-06 14:49:29.816 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 14:49:29.819 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 14:49:29.821 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 14:49:29.829 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 14:49:29.860 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:30.031 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:49:32.074 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/42
2025-02-06 14:49:32.075 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 14:49:32.075 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/42
2025-02-06 14:49:32.076 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/42", parameters={}
2025-02-06 14:49:32.077 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 14:49:32.084 [http-nio-8081-exec-3] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 42
2025-02-06 14:49:32.093 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 14:49:32.103 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 14:49:32.108 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:32.166 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:32.173 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:32.182 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:32.186 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:49:37.272 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 14:49:37.272 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 14:49:37.273 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 14:49:37.273 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 14:49:37.273 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 14:49:37.282 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:37.287 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 14:49:37.288 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 42
2025-02-06 14:49:37.289 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 14:49:37.293 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 42
2025-02-06 14:49:37.293 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:37.391 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 14:49:37.392 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 14:49:37.394 [http-nio-8081-exec-6] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 14:49:37.396 [http-nio-8081-exec-6] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:168)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 14:49:37.402 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 14:49:37.405 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:37.412 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:37.416 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:37.420 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:37.423 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 14:49:39.662 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 14:49:39.662 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@697cc200, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 14:49:39.663 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 14:49:39.663 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 14:49:39.663 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 14:49:39.667 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:39.671 [http-nio-8081-exec-8] INFO  r.k.s.b.d.c.AdminController - Attempting to edit user: user
2025-02-06 14:49:39.672 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Fetching user with ID 42
2025-02-06 14:49:39.672 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 14:49:39.677 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 42
2025-02-06 14:49:39.678 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:39.808 [http-nio-8081-exec-8] INFO  r.k.s.b.d.services.UserServiceImpl - Attempting to save user: user
2025-02-06 14:49:39.809 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-02-06 14:49:39.810 [http-nio-8081-exec-8] ERROR r.k.s.b.d.services.UserServiceImpl - User with username user already exists
2025-02-06 14:49:39.811 [http-nio-8081-exec-8] ERROR r.k.s.b.d.c.AdminController - Error editing user: User with this username already exists
ru.kata.spring.boot_security.demo.exceptions.UserAlreadyExistsException: User with this username already exists
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.checkIfUserExists(UserServiceImpl.java:37)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl.saveUser(UserServiceImpl.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.kata.spring.boot_security.demo.services.UserServiceImpl$$SpringCGLIB$$0.saveUser(<generated>)
	at ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(AdminController.java:168)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 14:49:39.814 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 14:49:39.817 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 14:49:39.825 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:39.829 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:39.833 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 14:49:39.838 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:20:47.407 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 15:20:47.420 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 15:20:47.435 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 15:20:47.449 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 15:20:47.457 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 15:30:58.845 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 24992 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 15:30:58.849 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 15:30:58.850 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 15:30:58.975 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 15:30:58.975 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 15:31:00.329 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 15:31:00.442 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 2 JPA repository interfaces.
2025-02-06 15:31:01.330 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 15:31:01.350 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 15:31:01.350 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 15:31:01.428 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 15:31:01.429 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2453 ms
2025-02-06 15:31:01.669 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 15:31:01.756 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 15:31:01.808 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 15:31:02.248 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 15:31:02.295 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 15:31:02.560 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@69510d90
2025-02-06 15:31:02.564 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 15:31:02.735 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 15:31:04.178 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 15:31:04.292 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 15:31:04.782 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 15:31:06.007 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 15:31:06.133 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 15:31:06.299 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-06 15:31:06.312 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 15:31:06.517 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 15:31:06.646 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 15:31:06.801 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 15:31:06.973 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 15:31:07.273 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 15:31:07.352 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 15:31:07.369 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.172 seconds (process running for 11.842)
2025-02-06 15:31:07.530 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:31:07.633 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:07.643 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:07.671 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 15:31:07.712 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 15:31:07.728 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 15:31:07.736 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 15:31:07.742 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 15:31:07.758 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 15:31:07.764 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:07.770 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 15:31:07.775 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 15:31:07.792 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:07.802 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 15:31:07.869 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 15:31:07.905 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 15:31:07.906 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 15:31:07.912 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 15:31:08.525 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$WB81BTvp0ZrCcnFJCoif3uqKDsKfmdN9JKLlB5QF7djohbGYABAiS
2025-02-06 15:31:08.525 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$iw9BMTctxYTTe8qQzvpclu3v3FQmp4HYKar7OmFYU6Of1vWDsd89C
2025-02-06 15:31:08.532 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:31:08.543 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 15:31:08.551 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 15:31:08.566 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 15:31:08.578 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 15:31:08.583 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 15:31:08.584 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 15:31:08.592 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 15:31:12.041 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 15:31:12.041 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 15:31:12.041 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 15:31:12.041 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 15:31:12.042 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 15:31:12.042 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7ffedf97
2025-02-06 15:31:12.043 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@10a28ffa
2025-02-06 15:31:12.043 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 15:31:12.043 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 15:31:12.061 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 15:31:12.070 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 15:31:12.073 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 15:31:12.076 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 15:31:12.092 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:12.274 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:12.277 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 15:31:14.600 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 15:31:14.601 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 15:31:14.601 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 15:31:14.602 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 15:31:14.605 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:14.667 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:14.667 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 15:31:17.139 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 15:31:17.380 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 15:31:17.515 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 15:31:17.531 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@535e3044, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@21635332]
2025-02-06 15:31:17.532 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@535e3044, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-02-06 15:31:17.532 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_USER]
2025-02-06 15:31:17.543 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 15:31:17.544 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@535e3044, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:31:17.544 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 15:31:17.544 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 15:31:17.545 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 15:31:17.563 [http-nio-8081-exec-4] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 15:31:17.579 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:17.746 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:19.684 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 15:31:19.685 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@535e3044, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:31:19.685 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@535e3044, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:31:19.687 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 7DBF96901776C7F8A95FE13EEB997D6E
2025-02-06 15:31:19.688 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 15:31:19.699 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 15:31:19.727 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 15:31:19.727 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 15:31:19.728 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 15:31:19.729 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:19.740 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:19.741 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 15:31:22.484 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 15:31:22.488 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 15:31:22.862 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 15:31:22.863 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4f44e46c]
2025-02-06 15:31:22.864 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 15:31:22.865 [http-nio-8081-exec-7] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 15:31:22.877 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 15:31:22.879 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:22.880 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 15:31:22.880 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 15:31:22.881 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 15:31:22.891 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:31:22.895 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:22.899 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:22.909 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:22.924 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:23.004 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:25.962 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 15:31:25.964 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:25.964 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 15:31:25.964 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 15:31:25.966 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 15:31:25.971 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 15:31:25.987 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/create.]
2025-02-06 15:31:25.988 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 15:31:26.002 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 15:31:26.003 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:26.004 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 15:31:26.004 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 15:31:26.005 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 15:31:26.030 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 15:31:26.042 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 15:31:27.428 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 15:31:27.429 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:27.430 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 15:31:27.430 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 15:31:27.430 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 15:31:27.436 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:31:27.441 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:27.443 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:27.450 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:27.454 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:27.468 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:29.760 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/44
2025-02-06 15:31:29.761 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:29.761 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/44
2025-02-06 15:31:29.762 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/44", parameters={}
2025-02-06 15:31:29.762 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 15:31:29.780 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 15:31:29.788 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:29.794 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:29.828 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:41.017 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 15:31:41.018 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:41.018 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 15:31:41.018 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 15:31:41.018 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 15:31:41.038 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 15:31:41.045 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 44
2025-02-06 15:31:41.046 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 15:31:41.051 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 15:31:41.158 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - User updated: user
2025-02-06 15:31:41.161 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 15:31:41.165 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 15:31:41.165 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 15:31:41.172 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 15:31:41.173 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 15:31:41.176 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 15:31:41.177 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:41.177 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 15:31:41.177 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 15:31:41.177 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 15:31:41.179 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:31:41.181 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:41.182 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:31:41.189 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:31:41.192 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:41.197 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:58.811 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 15:31:58.811 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:58.811 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@56094909, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:31:58.811 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session E20682455ACFC2D2A204AB4E7D4462E7
2025-02-06 15:31:58.812 [http-nio-8081-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 15:31:58.816 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 15:31:58.817 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 15:31:58.817 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 15:31:58.819 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 15:31:58.819 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:31:58.822 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:31:58.822 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 15:32:00.195 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 15:32:00.196 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 15:32:00.371 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 15:32:00.372 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc115f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2eac8f]
2025-02-06 15:32:00.372 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc115f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-02-06 15:32:00.372 [http-nio-8081-exec-6] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_USER]
2025-02-06 15:32:00.378 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 15:32:00.379 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc115f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:32:00.379 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 15:32:00.379 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 15:32:00.379 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 15:32:00.380 [http-nio-8081-exec-7] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 15:32:00.381 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:32:00.389 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:32:01.535 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 15:32:01.535 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc115f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:32:01.536 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc115f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 15:32:01.536 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 9192ADCDA3CD4596147C69EA78943FB9
2025-02-06 15:32:01.536 [http-nio-8081-exec-8] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 15:32:01.545 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 15:32:01.546 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 15:32:01.547 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 15:32:01.547 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 15:32:01.548 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:32:01.554 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:32:01.554 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 15:32:03.701 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 15:32:03.702 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 15:32:03.829 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 15:32:03.830 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30f25b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@42807bd5]
2025-02-06 15:32:03.830 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30f25b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 15:32:03.830 [http-nio-8081-exec-10] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 15:32:03.835 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 15:32:03.835 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30f25b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:32:03.835 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 15:32:03.835 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 15:32:03.835 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 15:32:03.837 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:32:03.839 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:32:03.841 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:32:03.845 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:32:03.849 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:32:03.855 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 15:32:05.929 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/delete/44
2025-02-06 15:32:05.930 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30f25b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:32:05.930 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/delete/44
2025-02-06 15:32:05.930 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/delete/44", parameters={}
2025-02-06 15:32:05.931 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#deleteUser(Long)
2025-02-06 15:32:05.934 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 15:32:05.938 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - User deleted with ID: 44
2025-02-06 15:32:05.938 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 15:32:05.941 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 15:32:05.950 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - User deleted successfully with ID: 44
2025-02-06 15:32:05.951 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 15:32:05.952 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 15:32:05.958 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 15:32:05.958 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@30f25b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 15:32:05.958 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 15:32:05.958 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 15:32:05.959 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 15:32:05.961 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 15:32:05.963 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 15:32:05.969 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 15:32:05.974 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 15:32:05.980 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 18:52:42.839 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 18:52:42.856 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 18:52:42.889 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 18:52:42.908 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 18:52:42.917 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 18:54:09.335 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 22104 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 18:54:09.340 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 18:54:09.342 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 18:54:09.522 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 18:54:09.523 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 18:54:11.337 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 18:54:11.515 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 149 ms. Found 2 JPA repository interfaces.
2025-02-06 18:54:13.647 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 18:54:13.744 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 18:54:13.746 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 18:54:13.949 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 18:54:13.950 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4425 ms
2025-02-06 18:54:15.415 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 18:54:15.720 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 18:54:15.882 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 18:54:16.921 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 18:54:17.038 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 18:54:17.693 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7501a15c
2025-02-06 18:54:17.698 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 18:54:18.307 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 18:54:23.078 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 18:54:23.432 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 18:54:24.518 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 18:54:27.351 [restartedMain] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-02-06 18:54:27.534 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 18:54:27.705 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-06 18:54:27.726 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 18:54:27.937 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 18:54:28.059 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 18:54:28.182 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 18:54:28.358 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 18:54:28.650 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 18:54:28.727 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 18:54:28.744 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 21.159 seconds (process running for 23.368)
2025-02-06 18:54:28.902 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 18:54:28.987 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 18:54:29.017 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 18:54:29.056 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 18:54:29.076 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 18:54:29.098 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 18:54:29.103 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 18:54:29.110 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 18:54:29.115 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 18:54:29.137 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 18:54:29.146 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 18:54:29.167 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 18:54:29.208 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 18:54:29.209 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 18:54:29.219 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 18:54:29.781 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$Q7L/J5oQaThUz4nhbedLeOBySqRLOf3nIJx7aiJHYVStpYEvfEbj2
2025-02-06 18:54:29.782 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$z6Oze1dzv4saZW25M/KGt.vAIgiEcResrAfyBjarWYw7WtpI75zRG
2025-02-06 18:54:29.786 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 18:54:29.793 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 18:54:29.797 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 18:54:29.809 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 18:54:29.820 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 18:54:29.824 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 18:54:29.826 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 18:54:29.831 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:41:37.132 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:41:37.135 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:41:37.135 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:41:37.136 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:41:37.136 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:41:37.140 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7bfd92cd
2025-02-06 19:41:37.141 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@234f94a4
2025-02-06 19:41:37.145 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:41:37.148 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 11 ms
2025-02-06 19:41:37.182 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 19:41:37.201 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 19:41:37.210 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 19:41:37.218 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 19:41:37.249 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:41:37.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:41:37.647 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:38.872 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:41:38.873 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:41:38.873 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:41:38.874 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:41:38.876 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:41:38.954 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:41:38.955 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:40.709 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:41:40.877 [http-nio-8081-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Filter execution threw an exception] with root cause
java.lang.StackOverflowError: null
	at org.springframework.aop.support.AopUtils.isEqualsMethod(AopUtils.java:166)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:175)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
2025-02-06 19:41:40.904 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 19:41:40.905 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:40.952 [http-nio-8081-exec-3] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-02-06 19:41:40.954 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-06 19:41:40.967 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:41:40.968 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:41:40.968 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:41:40.971 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:41:40.973 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:41:40.981 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:41:40.982 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:42.459 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:41:42.680 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Filter execution threw an exception] with root cause
java.lang.StackOverflowError: null
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.checkReceiver(DirectMethodHandleAccessor.java:196)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:99)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
2025-02-06 19:41:42.694 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 19:41:42.695 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:42.698 [http-nio-8081-exec-5] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-02-06 19:41:42.698 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-06 19:41:42.707 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:41:42.708 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:41:42.708 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:41:42.709 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:41:42.711 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:41:42.725 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:41:42.727 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:44.709 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:41:44.774 [http-nio-8081-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Filter execution threw an exception] with root cause
java.lang.StackOverflowError: null
	at java.base/java.lang.StringLatin1.indexOf(StringLatin1.java:344)
	at java.base/java.lang.String.indexOf(String.java:2636)
	at java.base/java.lang.String.contains(String.java:3023)
	at org.springframework.util.ClassUtils.getUserClass(ClassUtils.java:1017)
	at org.springframework.core.BridgeMethodResolver.resolveBridgeMethod(BridgeMethodResolver.java:106)
	at org.springframework.core.BridgeMethodResolver.findBridgedMethod(BridgeMethodResolver.java:71)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:356)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:216)
	at jdk.proxy4/jdk.proxy4.$Proxy130.authenticate(Unknown Source)
2025-02-06 19:41:44.778 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 19:41:44.778 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:44.779 [http-nio-8081-exec-7] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-02-06 19:41:44.779 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-06 19:41:44.784 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:41:44.784 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:41:44.784 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:41:44.784 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:41:44.784 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:41:44.790 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:41:44.790 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:41:53.622 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 19:41:53.628 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 19:41:53.634 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:41:53.640 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 19:41:53.644 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 19:42:03.191 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 17428 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 19:42:03.197 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 19:42:03.199 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 19:42:03.355 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 19:42:03.356 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 19:42:05.065 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 19:42:05.187 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 2 JPA repository interfaces.
2025-02-06 19:42:06.146 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 19:42:06.169 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 19:42:06.169 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 19:42:06.242 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 19:42:06.243 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2886 ms
2025-02-06 19:42:06.559 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 19:42:06.658 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 19:42:06.715 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 19:42:07.141 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 19:42:07.207 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 19:42:07.501 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@349bf7a9
2025-02-06 19:42:07.504 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 19:42:07.660 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 19:42:09.494 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 19:42:09.612 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:42:10.247 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 19:42:11.828 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 19:42:11.962 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 19:42:12.055 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-06 19:42:12.066 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 19:42:12.197 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 19:42:12.276 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 19:42:12.380 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 19:42:12.520 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 19:42:12.784 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 19:42:12.853 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 19:42:12.868 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 11.382 seconds (process running for 13.509)
2025-02-06 19:42:12.993 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:42:13.066 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:42:13.079 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:42:13.101 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 19:42:13.130 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:42:13.139 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:42:13.144 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:42:13.149 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:42:13.158 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 19:42:13.161 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:42:13.163 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:42:13.168 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:42:13.180 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:42:13.186 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 19:42:13.199 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:42:13.226 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 19:42:13.227 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:42:13.233 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 19:42:13.636 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$imaMXZUa2rirHoCNh19qZOuIIPn8hoJUyLJDHoMaZGiQn2ItuwwEy
2025-02-06 19:42:13.636 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$Zsrco53AbdkHogtf/wqTyuGcdnLksDjwLCzwPkaPUrgleQ3gq/PAG
2025-02-06 19:42:13.640 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:42:13.645 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:42:13.648 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 19:42:13.659 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:42:13.668 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:42:13.670 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 19:42:13.671 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:42:13.676 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:43:03.828 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:43:03.828 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:43:03.828 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:43:03.829 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:43:03.829 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:43:03.830 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7e1813ab
2025-02-06 19:43:03.831 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b0a91e8
2025-02-06 19:43:03.831 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:43:03.831 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 19:43:03.852 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:43:04.138 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:43:04.323 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:43:04.349 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 3310EE7073874954E642928E0492365E
2025-02-06 19:43:04.353 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7041b58a]
2025-02-06 19:43:04.353 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:43:04.354 [http-nio-8081-exec-1] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:43:04.389 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:43:04.395 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:04.396 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:43:04.400 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:43:04.401 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:43:04.432 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:43:04.435 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:04.437 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:04.442 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:43:04.476 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:05.067 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:18.554 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/48
2025-02-06 19:43:18.554 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:18.554 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/48
2025-02-06 19:43:18.554 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/48", parameters={}
2025-02-06 19:43:18.555 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 19:43:18.568 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 19:43:18.576 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:43:18.583 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:18.618 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:26.172 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 19:43:26.173 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:26.173 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 19:43:26.173 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 19:43:26.174 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 19:43:26.193 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:43:26.198 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:43:26.202 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 47
2025-02-06 19:43:26.203 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:43:26.206 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 48
2025-02-06 19:43:26.206 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:43:26.210 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 19:43:26.313 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:43:26.316 [http-nio-8081-exec-4] INFO  r.k.s.b.d.services.UserServiceImpl - User updated: user
2025-02-06 19:43:26.321 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 19:43:26.325 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:43:26.326 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:43:26.327 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:43:26.335 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 19:43:26.336 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 19:43:26.340 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:43:26.340 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:26.341 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:43:26.341 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:43:26.341 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:43:26.343 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:43:26.345 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:26.347 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:26.351 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:43:26.357 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:26.366 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:32.968 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 19:43:32.968 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:32.968 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@738a3e5c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=3310EE7073874954E642928E0492365E], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:32.969 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 9C5E4D70C1DE14A8AAFD72A494F73852
2025-02-06 19:43:32.970 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 19:43:32.975 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 19:43:32.991 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 19:43:32.992 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 19:43:32.993 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:43:32.998 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:33.002 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:33.002 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:43:35.010 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:43:35.012 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:43:35.110 [http-nio-8081-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:43:35.110 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2f71ac99]
2025-02-06 19:43:35.110 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]
2025-02-06 19:43:35.110 [http-nio-8081-exec-8] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user' successfully authenticated with roles: [ROLE_ADMIN, ROLE_USER]
2025-02-06 19:43:35.115 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:43:35.116 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 19:43:35.116 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:43:35.116 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:43:35.117 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:43:35.119 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:43:35.121 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:35.123 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:35.127 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:43:35.130 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:35.138 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:39.761 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 19:43:39.761 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 19:43:39.761 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 19:43:39.761 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 19:43:39.762 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 19:43:39.762 [http-nio-8081-exec-10] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user
2025-02-06 19:43:39.763 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:39.787 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:41.800 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 19:43:41.801 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 19:43:41.801 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1bc2de5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 19:43:41.801 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session DD5A908BFBDB52E4E3095BE39E313DC4
2025-02-06 19:43:41.801 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 19:43:41.809 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 19:43:41.810 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 19:43:41.810 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 19:43:41.811 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:43:41.811 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:41.814 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:43:41.814 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:43:57.328 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:43:57.328 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:43:57.443 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:43:57.443 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@640da5e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@974e772]
2025-02-06 19:43:57.443 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@640da5e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:43:57.444 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:43:57.448 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:43:57.449 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@640da5e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:43:57.449 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:43:57.449 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:43:57.449 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:43:57.451 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:43:57.453 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:57.455 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:43:57.461 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:43:57.465 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:43:57.474 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:44:11.623 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:44:11.623 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@640da5e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:44:11.624 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:44:11.624 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:44:11.625 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 19:44:11.628 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 19:44:11.637 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/create.]
2025-02-06 19:44:11.638 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 19:44:11.645 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 19:44:11.646 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@640da5e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:44:11.646 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 19:44:11.646 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 19:44:11.647 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 19:44:11.656 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 19:44:11.661 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 19:46:18.445 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 19:46:18.453 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 19:46:18.464 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:46:18.472 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 19:46:18.488 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 19:46:31.297 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 17852 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 19:46:31.301 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 19:46:31.303 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 19:46:31.452 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 19:46:31.453 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 19:46:33.691 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 19:46:33.953 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 239 ms. Found 2 JPA repository interfaces.
2025-02-06 19:46:35.556 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 19:46:35.584 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 19:46:35.585 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 19:46:35.685 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 19:46:35.686 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4231 ms
2025-02-06 19:46:35.985 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 19:46:36.057 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 19:46:36.111 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 19:46:36.530 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 19:46:36.574 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 19:46:36.796 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1de2a0ab
2025-02-06 19:46:36.798 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 19:46:36.931 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 19:46:38.626 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 19:46:38.741 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:46:39.186 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 19:46:40.623 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 19:46:40.763 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 19:46:40.948 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 12 mappings in 'requestMappingHandlerMapping'
2025-02-06 19:46:40.971 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 19:46:41.215 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 19:46:41.331 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 19:46:41.470 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 19:46:41.625 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 19:46:41.897 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 19:46:41.980 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 19:46:42.000 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 12.158 seconds (process running for 14.313)
2025-02-06 19:46:42.121 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:46:42.121 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:46:42.122 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:46:42.122 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:46:42.122 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:46:42.125 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@274b0a59
2025-02-06 19:46:42.126 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7f766417
2025-02-06 19:46:42.127 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:46:42.127 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-06 19:46:42.157 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 19:46:42.167 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:46:42.173 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 19:46:42.177 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 19:46:42.182 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 19:46:42.207 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:46:42.240 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:46:42.250 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:46:42.274 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 19:46:42.304 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:46:42.313 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:46:42.319 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:46:42.324 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:46:42.333 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 19:46:42.336 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:46:42.339 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:46:42.341 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:46:42.354 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:46:42.359 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 19:46:42.372 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:46:42.401 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 19:46:42.403 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:46:42.411 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 19:46:42.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:46:42.535 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@2e7efa02, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:46:42.841 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$CuFTOC9UzwgqjRJQlJgH/OS9QK35J.osF0WUbF.r.GL41TggV3UgS
2025-02-06 19:46:42.841 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$7ISYJoDcScy2q09KRyLSkOHCXwx8FxdfDSSE4ZrWaOUcakOdCV9rK
2025-02-06 19:46:42.846 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:46:42.853 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:46:42.855 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 19:46:42.865 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:46:42.878 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:46:42.880 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 19:46:42.881 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:46:42.887 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:46:44.560 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:46:44.562 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:46:44.562 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:46:44.563 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:46:44.568 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:46:44.680 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:46:44.680 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@2e7efa02, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:46:46.015 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:46:46.391 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:46:46.582 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:46:46.600 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from FFEC0CC6B93E95D23D5EA15075C202A6
2025-02-06 19:46:46.602 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@110231da, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3f83bb1e]
2025-02-06 19:46:46.603 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@110231da, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:46:46.603 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:46:46.618 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:46:46.619 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@110231da, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:46:46.620 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:46:46.620 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:46:46.620 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:46:46.654 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:46:46.658 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:46:46.660 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:46:46.668 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:46:46.696 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:46:46.909 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:46:47.884 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:46:47.885 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@110231da, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:46:47.885 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:46:47.887 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:46:47.887 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 19:46:47.890 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:46:47.896 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:46:47.897 [http-nio-8081-exec-5] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-5] Exception processing template "admin/add-new-user": Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers
org.thymeleaf.exceptions.TemplateInputException: Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 19:46:47.901 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@2f479acc]
org.thymeleaf.exceptions.TemplateInputException: Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 19:46:47.902 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers
2025-02-06 19:46:47.904 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause
org.thymeleaf.exceptions.TemplateInputException: Error resolving template [admin/add-new-user], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1570)
2025-02-06 19:46:47.913 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-06 19:46:47.915 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@110231da, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:46:47.915 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-06 19:46:47.915 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-06 19:46:47.916 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 19:46:47.931 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 19:46:47.938 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-06 19:47:41.288 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 19:47:41.293 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 19:47:41.303 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:47:41.308 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 19:47:41.321 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 19:48:56.287 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 12580 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 19:48:56.291 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 19:48:56.292 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 19:48:56.394 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 19:48:56.395 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 19:48:57.995 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 19:48:58.113 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 2 JPA repository interfaces.
2025-02-06 19:48:59.046 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 19:48:59.069 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 19:48:59.069 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 19:48:59.146 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 19:48:59.147 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2749 ms
2025-02-06 19:48:59.440 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 19:48:59.517 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 19:48:59.568 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 19:49:00.126 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 19:49:00.194 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 19:49:00.526 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e8d86c8
2025-02-06 19:49:00.530 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 19:49:00.675 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 19:49:02.072 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 19:49:02.214 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:49:02.650 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 19:49:04.119 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 19:49:04.302 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 19:49:04.444 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 12 mappings in 'requestMappingHandlerMapping'
2025-02-06 19:49:04.453 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 19:49:04.579 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 19:49:04.661 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 19:49:04.765 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 19:49:04.885 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 19:49:05.126 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 19:49:05.184 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 19:49:05.197 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 10.167 seconds (process running for 12.014)
2025-02-06 19:49:05.311 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:49:05.371 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:49:05.384 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:49:05.400 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 19:49:05.425 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:49:05.433 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:49:05.439 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:49:05.445 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:49:05.453 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 19:49:05.456 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:49:05.459 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:49:05.462 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:49:05.471 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:49:05.475 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 19:49:05.483 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:49:05.502 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 19:49:05.503 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:49:05.511 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 19:49:05.932 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$rASnHJnoIvTVkBYkQMSIqeHboA2sdes0HyCW.jrWoFaMK/O36d4bi
2025-02-06 19:49:05.932 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$L9ZU6mhp7JfaxTVcbEqXn.ZUNRO2Ei9dmNuyd8PlzOwoObtIIAIOG
2025-02-06 19:49:05.935 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:49:05.941 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:49:05.944 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 19:49:05.953 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:49:05.963 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:49:05.965 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 19:49:05.966 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:49:05.971 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:49:06.904 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:49:06.904 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:49:06.906 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:49:06.906 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:49:06.906 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:49:06.908 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@27331400
2025-02-06 19:49:06.909 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@190b4aa3
2025-02-06 19:49:06.910 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:49:06.910 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-06 19:49:06.948 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 19:49:06.968 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 19:49:06.973 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 19:49:06.981 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 19:49:07.015 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:49:07.567 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:49:07.569 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5e7fe12f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:08.885 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:49:08.886 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:49:08.887 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:49:08.888 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:49:08.892 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:49:09.008 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:49:09.009 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5e7fe12f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=FFEC0CC6B93E95D23D5EA15075C202A6], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:09.877 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:49:10.277 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:49:10.530 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:49:10.550 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 8F4203C0FA877C8A45A6CBFBEDBA04DD
2025-02-06 19:49:10.552 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@523d6885]
2025-02-06 19:49:10.552 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:49:10.553 [http-nio-8081-exec-4] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:49:10.565 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:49:10.566 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:10.567 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:49:10.567 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:49:10.567 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:49:10.608 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:49:10.612 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:49:10.614 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:49:10.619 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:49:10.649 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:49:10.897 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:49:11.921 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:49:11.923 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:11.923 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:49:11.923 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:49:11.924 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 19:49:11.929 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:49:11.935 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:49:11.946 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:49:45.551 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/add-new-user
2025-02-06 19:49:45.552 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:45.552 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/add-new-user
2025-02-06 19:49:45.552 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/add-new-user", parameters={masked}
2025-02-06 19:49:45.554 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-06 19:49:45.566 [http-nio-8081-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-06 19:49:45.571 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/add-new-user.]
2025-02-06 19:49:45.572 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-06 19:49:45.577 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 19:49:45.578 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1e14bf2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:49:45.578 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-06 19:49:45.578 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={masked}
2025-02-06 19:49:45.579 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 19:49:45.600 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 19:49:45.606 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-02-06 19:52:47.985 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 19:52:47.990 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 19:52:47.995 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:52:47.999 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 19:52:48.008 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 19:52:55.506 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 23412 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 19:52:55.510 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 19:52:55.513 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 19:52:55.694 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 19:52:55.694 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 19:52:58.113 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 19:52:58.283 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 147 ms. Found 2 JPA repository interfaces.
2025-02-06 19:52:59.696 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 19:52:59.726 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 19:52:59.727 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 19:52:59.845 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 19:52:59.846 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4149 ms
2025-02-06 19:53:00.361 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 19:53:00.471 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 19:53:00.544 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 19:53:01.169 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 19:53:01.225 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 19:53:01.480 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@446cd764
2025-02-06 19:53:01.483 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 19:53:01.627 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 19:53:05.362 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 19:53:05.485 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:53:05.968 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 19:53:07.095 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 19:53:07.288 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 19:53:07.443 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 12 mappings in 'requestMappingHandlerMapping'
2025-02-06 19:53:07.458 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 19:53:07.610 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 19:53:07.717 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 19:53:07.808 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 19:53:07.930 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 19:53:08.172 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 19:53:08.234 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 19:53:08.247 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 14.644 seconds (process running for 16.838)
2025-02-06 19:53:08.354 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:53:08.410 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:53:08.422 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:53:08.438 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 19:53:08.462 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:53:08.470 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:53:08.475 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:53:08.479 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:53:08.489 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 19:53:08.491 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:53:08.494 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:53:08.496 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:53:08.505 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:53:08.510 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 19:53:08.518 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:53:08.539 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 19:53:08.540 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:53:08.546 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 19:53:08.899 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$Yk8Qs/3NUL1yklyqyt95h.98j/01PFLN7I09cfql1g5Q8VKbeGhky
2025-02-06 19:53:08.899 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$KOQXlWfhxmLSHfWLVLFVvupknSRO2Ni9c0cPRPkhcpVDhq4bERB.G
2025-02-06 19:53:08.903 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:53:08.909 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:53:08.911 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 19:53:08.924 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:53:08.934 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:53:08.937 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 19:53:08.938 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:53:08.944 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:53:39.728 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:53:39.728 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:53:39.728 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:53:39.729 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:53:39.729 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:53:39.730 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@14642d26
2025-02-06 19:53:39.730 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@65445506
2025-02-06 19:53:39.730 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:53:39.730 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 19:53:39.745 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 19:53:39.753 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 19:53:39.756 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 19:53:39.760 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 19:53:39.770 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:53:39.932 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:53:39.933 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@44d0f4f0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:53:41.386 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:53:41.387 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:53:41.388 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:53:41.390 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:53:41.393 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:53:41.469 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:53:41.470 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@44d0f4f0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8F4203C0FA877C8A45A6CBFBEDBA04DD], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:53:42.590 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:53:42.930 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:53:43.172 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:53:43.192 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 2E4CBB0F2AE9B675726B111693CAA0E8
2025-02-06 19:53:43.195 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7a0692bd]
2025-02-06 19:53:43.195 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:53:43.196 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:53:43.210 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:53:43.211 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:53:43.212 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:53:43.212 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:53:43.212 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:53:43.251 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:53:43.254 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:53:43.258 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:53:43.266 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:53:43.296 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:53:43.500 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:53:45.183 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:53:45.184 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:53:45.184 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:53:45.184 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:53:45.185 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 19:53:45.189 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:53:45.197 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:53:45.212 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:54:15.128 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/add
2025-02-06 19:54:15.128 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:15.128 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/add
2025-02-06 19:54:15.130 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/add", parameters={masked}
2025-02-06 19:54:15.130 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#addUser(User, List)
2025-02-06 19:54:15.155 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:54:15.160 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 54
2025-02-06 19:54:15.160 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:54:15.267 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:54:15.268 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user1
2025-02-06 19:54:15.269 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:54:15.273 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - User added successfully: user1
2025-02-06 19:54:15.276 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 19:54:15.276 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 19:54:15.285 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:54:15.287 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:15.287 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:54:15.287 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:54:15.288 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:54:15.292 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:54:15.295 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:15.298 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:15.300 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:15.306 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:54:15.310 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:54:15.319 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:54:23.715 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:54:23.716 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:23.716 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:54:23.716 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:54:23.717 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 19:54:23.721 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:54:23.729 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:54:23.741 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:54:38.359 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/add
2025-02-06 19:54:38.360 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:38.361 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/add
2025-02-06 19:54:38.361 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/add", parameters={masked}
2025-02-06 19:54:38.361 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#addUser(User, List)
2025-02-06 19:54:38.364 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:54:38.369 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 53
2025-02-06 19:54:38.370 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 19:54:38.477 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:54:38.479 [http-nio-8081-exec-9] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin1
2025-02-06 19:54:38.480 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:54:38.484 [http-nio-8081-exec-9] INFO  r.k.s.b.d.c.AdminController - User added successfully: admin1
2025-02-06 19:54:38.485 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 19:54:38.485 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 19:54:38.490 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:54:38.491 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:38.491 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:54:38.491 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:54:38.491 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:54:38.494 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:54:38.496 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:38.497 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:38.498 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:38.500 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:38.503 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:54:38.507 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:54:38.519 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:54:51.282 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 19:54:51.282 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:51.282 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@521fa54d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2E4CBB0F2AE9B675726B111693CAA0E8], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:51.283 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session EFD7C8FB8E8164B54D3E63EFFF51FED1
2025-02-06 19:54:51.284 [http-nio-8081-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 19:54:51.289 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 19:54:51.303 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 19:54:51.304 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 19:54:51.305 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:54:51.305 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:54:51.310 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:54:51.310 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:54:56.433 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:54:56.435 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:54:56.525 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:54:56.525 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d4b1404, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@46a8e76]
2025-02-06 19:54:56.525 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d4b1404, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:54:56.525 [http-nio-8081-exec-5] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin1' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:54:56.529 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:54:56.530 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d4b1404, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:54:56.530 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:54:56.530 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:54:56.530 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:54:56.532 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:54:56.535 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:56.536 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:56.538 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:56.540 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:54:56.544 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:54:56.547 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:54:56.558 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:55:00.369 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 19:55:00.369 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d4b1404, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:55:00.370 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1d4b1404, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:55:00.370 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 368DE11039FEE7ADE9AB7B8A415283B2
2025-02-06 19:55:00.370 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 19:55:00.374 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 19:55:00.375 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 19:55:00.375 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 19:55:00.375 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:55:00.377 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:55:00.380 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:55:00.381 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:58:44.726 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 19:58:44.730 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 19:58:44.737 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:58:44.741 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 19:58:44.747 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 19:58:51.435 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 21656 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 19:58:51.440 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 19:58:51.442 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 19:58:51.592 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 19:58:51.594 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 19:58:52.967 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 19:58:53.077 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 93 ms. Found 2 JPA repository interfaces.
2025-02-06 19:58:53.924 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 19:58:53.946 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 19:58:53.947 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 19:58:54.032 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 19:58:54.032 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2437 ms
2025-02-06 19:58:54.280 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 19:58:54.370 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 19:58:54.424 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 19:58:54.901 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 19:58:54.945 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 19:58:55.190 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@35a1f2e1
2025-02-06 19:58:55.192 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 19:58:55.317 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 19:58:56.439 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 19:58:56.542 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 19:58:56.922 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 19:58:57.840 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 19:58:57.943 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 19:58:58.017 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 12 mappings in 'requestMappingHandlerMapping'
2025-02-06 19:58:58.023 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 19:58:58.127 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 19:58:58.186 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 19:58:58.251 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 19:58:58.342 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 19:58:58.553 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 19:58:58.610 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 19:58:58.623 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 8.532 seconds (process running for 10.416)
2025-02-06 19:58:58.734 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:58:58.810 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:58:58.821 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:58:58.825 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:58:58.829 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:58:58.860 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 19:58:58.896 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:58:58.904 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:58:58.906 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:58:58.908 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 19:58:58.914 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:58:58.918 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:58:58.920 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:58:58.922 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 19:58:58.930 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 19:58:58.932 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:58:58.935 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:58:58.937 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 19:58:58.948 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:58:58.952 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 19:58:58.963 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:58:58.984 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 19:58:58.985 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 19:58:58.992 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 19:58:59.308 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$rkC4/lvp2Jix2NTIPd2CGONsMOC//PU3.t8IGWzdLgIrmOPgpS4zC
2025-02-06 19:58:59.308 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$5wMgFMbaA2WXFFYVSCqlvercouvUL3bAPxJifoAcksyY2ssD3rTdq
2025-02-06 19:58:59.313 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:58:59.321 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:58:59.324 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 19:58:59.334 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:58:59.343 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 19:58:59.346 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 19:58:59.347 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 19:58:59.352 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 19:59:05.284 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 19:59:05.284 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 19:59:05.285 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 19:59:05.285 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 19:59:05.285 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 19:59:05.285 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5cfefec7
2025-02-06 19:59:05.286 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@cc903fd
2025-02-06 19:59:05.286 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 19:59:05.286 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-06 19:59:05.297 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 19:59:05.306 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 19:59:05.308 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 19:59:05.309 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 19:59:05.320 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:05.469 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:05.471 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:59:07.332 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 19:59:07.333 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 19:59:07.333 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 19:59:07.334 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 19:59:07.336 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:07.396 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:07.396 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 19:59:08.687 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 19:59:08.928 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 19:59:09.061 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 19:59:09.078 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7c94e82b]
2025-02-06 19:59:09.078 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 19:59:09.079 [http-nio-8081-exec-2] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 19:59:09.088 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:59:09.089 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:09.089 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:59:09.089 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:59:09.090 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:59:09.114 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:59:09.117 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:09.118 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:09.126 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:09.149 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:09.305 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:11.050 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/58
2025-02-06 19:59:11.050 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:11.050 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/58
2025-02-06 19:59:11.050 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/58", parameters={}
2025-02-06 19:59:11.051 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 19:59:11.066 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 19:59:11.074 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:11.079 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:11.109 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:27.928 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 19:59:27.929 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:27.929 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 19:59:27.929 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 19:59:27.929 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 19:59:27.939 [http-nio-8081-exec-6] DEBUG o.s.web.method.HandlerMethod - Could not resolve parameter [1] in public java.lang.String ru.kata.spring.boot_security.demo.controllers.AdminController.editUser(ru.kata.spring.boot_security.demo.models.User,java.util.List<java.lang.Long>,org.springframework.ui.Model): Required request parameter 'roles' for method parameter type List is not present
2025-02-06 19:59:27.951 [http-nio-8081-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'roles' for method parameter type List is not present]
2025-02-06 19:59:27.951 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-06 19:59:27.959 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-06 19:59:27.960 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:27.960 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-06 19:59:27.961 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={masked}
2025-02-06 19:59:27.961 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-06 19:59:27.970 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-06 19:59:27.974 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 400
2025-02-06 19:59:29.615 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:59:29.616 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:29.616 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:59:29.616 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:59:29.617 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:59:29.619 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:59:29.621 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:29.623 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:29.627 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:29.632 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:29.640 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:31.820 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 19:59:31.820 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:31.820 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 19:59:31.820 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 19:59:31.821 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 19:59:31.823 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:31.828 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:31.837 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:34.149 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 19:59:34.150 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:34.150 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 19:59:34.150 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 19:59:34.151 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 19:59:34.157 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 19:59:34.162 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:34.166 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 19:59:34.176 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:34.181 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:34.200 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 19:59:35.674 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/58
2025-02-06 19:59:35.674 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 19:59:35.675 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/58
2025-02-06 19:59:35.675 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/58", parameters={}
2025-02-06 19:59:35.676 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 19:59:35.678 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 19:59:35.686 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 19:59:35.691 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 19:59:35.700 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:00:09.406 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:00:09.407 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:00:09.407 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:00:09.407 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:00:09.408 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:00:09.413 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:00:09.417 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:00:09.421 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:00:09.431 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:00:09.438 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:00:09.456 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:00:10.748 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 20:00:10.750 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:00:10.751 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 20:00:10.752 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 20:00:10.753 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 20:00:10.758 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:00:10.764 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:00:10.778 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:00:24.344 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/add
2025-02-06 20:00:24.345 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:00:24.345 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/add
2025-02-06 20:00:24.345 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/add", parameters={masked}
2025-02-06 20:00:24.346 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#addUser(User, List)
2025-02-06 20:00:24.364 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:00:24.369 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:00:24.374 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 55
2025-02-06 20:00:24.375 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:00:24.378 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 56
2025-02-06 20:00:24.379 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:00:24.521 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 20:00:24.524 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 20:00:24.525 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:00:24.526 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:00:24.532 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - User added successfully: admin
2025-02-06 20:00:24.535 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 20:00:24.536 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 20:00:24.543 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:00:24.543 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5185eb0d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:00:24.544 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:00:24.544 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:00:24.544 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:00:24.547 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:00:24.550 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:00:24.553 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:00:24.555 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:00:24.560 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:00:24.565 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:00:24.579 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:03:07.326 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 20:03:07.335 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 20:03:07.348 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 20:03:07.357 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 20:03:07.374 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-06 20:05:57.758 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 22.0.1 with PID 23220 (C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security\target\classes started by dimag in C:\Users\dimag\IdeaProjects\PP_3_1_2\PP_3_1_2_Boot_Security)
2025-02-06 20:05:57.761 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-06 20:05:57.762 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-06 20:05:57.877 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-06 20:05:57.878 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-06 20:05:59.137 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 20:05:59.239 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88 ms. Found 2 JPA repository interfaces.
2025-02-06 20:06:00.101 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-06 20:06:00.120 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-06 20:06:00.121 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-06 20:06:00.200 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-06 20:06:00.200 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2321 ms
2025-02-06 20:06:00.501 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 20:06:00.580 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-06 20:06:00.628 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 20:06:01.051 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 20:06:01.094 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-06 20:06:01.307 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@763977f9
2025-02-06 20:06:01.310 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-06 20:06:01.438 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 20:06:02.637 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 20:06:02.735 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 20:06:03.091 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 20:06:04.001 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsImpl
2025-02-06 20:06:04.102 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-02-06 20:06:04.180 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 12 mappings in 'requestMappingHandlerMapping'
2025-02-06 20:06:04.188 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/, /login, /access-denied, /error] in 'viewControllerHandlerMapping'
2025-02-06 20:06:04.286 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-06 20:06:04.347 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-06 20:06:04.410 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-06 20:06:04.496 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-06 20:06:04.678 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-06 20:06:04.725 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-06 20:06:04.736 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 8.401 seconds (process running for 10.352)
2025-02-06 20:06:04.833 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:06:04.880 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:04.887 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:04.888 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:04.903 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - All users have been deleted.
2025-02-06 20:06:04.923 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 20:06:04.927 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 20:06:04.929 [restartedMain] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 20:06:04.935 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 20:06:04.939 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 20:06:04.940 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 20:06:04.948 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Deleting all roles
2025-02-06 20:06:04.950 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:04.954 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 20:06:04.955 [restartedMain] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.Role */delete 
    from
        roles 
    where
        id=?
2025-02-06 20:06:04.965 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:04.968 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_ADMIN
2025-02-06 20:06:04.978 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 20:06:04.998 [restartedMain] INFO  r.k.s.b.d.services.RoleServiceImpl - Saving role: ROLE_USER
2025-02-06 20:06:05.000 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.Role */insert 
    into
        roles (name) 
    values
        (?)
2025-02-06 20:06:05.004 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Roles have been created successfully.
2025-02-06 20:06:05.288 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded Admin Password: $2a$10$v7Spox/VXRCGVY5RKatc..ZXcJCb7OJOCBx7rcvXAAmtZX.vSZ2hu
2025-02-06 20:06:05.288 [restartedMain] DEBUG r.k.s.b.demo.configs.DataInitializer - Encoded User Password: $2a$10$MAKXY6F5iivcyERL0piFl.evy8UWKSQSbpOoYnNqKTUDzpQdtFxQO
2025-02-06 20:06:05.291 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:06:05.296 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 20:06:05.300 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin
2025-02-06 20:06:05.307 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:06:05.315 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 20:06:05.316 [restartedMain] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: user
2025-02-06 20:06:05.317 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:06:05.322 [restartedMain] INFO  r.k.s.b.demo.configs.DataInitializer - Admin and User have been created successfully!
2025-02-06 20:06:22.158 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-06 20:06:22.159 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-06 20:06:22.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-06 20:06:22.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-06 20:06:22.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-06 20:06:22.161 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3be7bc5
2025-02-06 20:06:22.162 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3aba664b
2025-02-06 20:06:22.162 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-06 20:06:22.162 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-06 20:06:22.190 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-06 20:06:22.206 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-06 20:06:22.211 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-06 20:06:22.216 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="index"]
2025-02-06 20:06:22.236 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:22.495 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:22.496 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@766a784f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:25.438 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-06 20:06:25.439 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2025-02-06 20:06:25.439 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login", parameters={}
2025-02-06 20:06:25.440 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 20:06:25.442 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:25.526 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:25.526 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@766a784f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:26.673 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 20:06:26.982 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 20:06:27.162 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 20:06:27.178 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 811EC471BC981C68399E53418E5F0C8B
2025-02-06 20:06:27.181 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@32916a95]
2025-02-06 20:06:27.181 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]
2025-02-06 20:06:27.181 [http-nio-8081-exec-3] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin' successfully authenticated with roles: [ROLE_ADMIN]
2025-02-06 20:06:27.190 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:06:27.191 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:27.192 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:06:27.192 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:06:27.193 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:06:27.226 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:06:27.230 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:27.232 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:27.240 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:27.272 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:27.478 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:28.591 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/create
2025-02-06 20:06:28.592 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:28.592 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/create
2025-02-06 20:06:28.592 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/create", parameters={}
2025-02-06 20:06:28.593 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showCreateUserForm(Model)
2025-02-06 20:06:28.596 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:28.604 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:28.622 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:45.389 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/add
2025-02-06 20:06:45.389 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:45.390 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/add
2025-02-06 20:06:45.390 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/add", parameters={masked}
2025-02-06 20:06:45.390 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#addUser(User, List)
2025-02-06 20:06:45.419 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:06:45.423 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:06:45.429 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 57
2025-02-06 20:06:45.429 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:06:45.432 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 58
2025-02-06 20:06:45.432 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:06:45.528 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User */insert 
    into
        users (age, email, first_name, last_name, password, username) 
    values
        (?, ?, ?, ?, ?, ?)
2025-02-06 20:06:45.530 [http-nio-8081-exec-6] INFO  r.k.s.b.d.services.UserServiceImpl - User saved: admin1
2025-02-06 20:06:45.530 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:06:45.531 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:06:45.537 [http-nio-8081-exec-6] INFO  r.k.s.b.d.c.AdminController - User added successfully: admin1
2025-02-06 20:06:45.540 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 20:06:45.541 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 20:06:45.546 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:06:45.546 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:45.546 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:06:45.546 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:06:45.546 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:06:45.549 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:06:45.551 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:45.553 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:45.555 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:45.559 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:45.564 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:45.576 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:50.029 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 20:06:50.030 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:50.031 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@33754ea8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=811EC471BC981C68399E53418E5F0C8B], Granted Authorities=[ROLE_ADMIN]]]
2025-02-06 20:06:50.034 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 5E2CF3F2952CD352B442869D8EE37D9A
2025-02-06 20:06:50.035 [http-nio-8081-exec-8] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 20:06:50.041 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 20:06:50.057 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 20:06:50.057 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 20:06:50.059 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 20:06:50.060 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:50.064 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:06:50.065 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 20:06:55.900 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 20:06:55.902 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 20:06:55.993 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 20:06:55.993 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@22136af1]
2025-02-06 20:06:55.993 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]
2025-02-06 20:06:55.993 [http-nio-8081-exec-10] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'admin1' successfully authenticated with roles: [ROLE_ADMIN, ROLE_USER]
2025-02-06 20:06:55.997 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:06:55.998 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:06:55.998 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:06:55.998 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:06:55.998 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:06:56.001 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:06:56.003 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:56.004 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:56.006 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:06:56.010 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:06:56.014 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:06:56.023 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:01.654 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/delete/62
2025-02-06 20:07:01.654 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:01.654 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/delete/62
2025-02-06 20:07:01.654 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/delete/62", parameters={}
2025-02-06 20:07:01.654 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#deleteUser(Long)
2025-02-06 20:07:01.658 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 20:07:01.660 [http-nio-8081-exec-2] INFO  r.k.s.b.d.services.UserServiceImpl - User deleted with ID: 62
2025-02-06 20:07:01.660 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 20:07:01.661 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.models.User */delete 
    from
        users 
    where
        id=?
2025-02-06 20:07:01.666 [http-nio-8081-exec-2] INFO  r.k.s.b.d.c.AdminController - User deleted successfully with ID: 62
2025-02-06 20:07:01.667 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 20:07:01.667 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 20:07:01.675 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:07:01.676 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:01.676 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:07:01.676 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:07:01.676 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:07:01.679 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:07:01.682 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:07:01.685 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:07:01.690 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:07:01.695 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:01.705 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:03.927 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/edit-user/61
2025-02-06 20:07:03.927 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:03.928 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/edit-user/61
2025-02-06 20:07:03.928 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/edit-user/61", parameters={}
2025-02-06 20:07:03.928 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#showEditUserPage(Long, Model)
2025-02-06 20:07:03.930 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 20:07:03.936 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:07:03.939 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:03.961 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:14.237 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/edit-user
2025-02-06 20:07:14.237 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:14.237 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/edit-user
2025-02-06 20:07:14.238 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/edit-user", parameters={masked}
2025-02-06 20:07:14.238 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#editUser(User, List, Model)
2025-02-06 20:07:14.240 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:07:14.245 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.RoleServiceImpl - Attempting to find role with ID 58
2025-02-06 20:07:14.245 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-02-06 20:07:14.250 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name,
        u1_0.username 
    from
        users u1_0 
    left join
        users_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-06 20:07:14.345 [http-nio-8081-exec-5] INFO  r.k.s.b.d.services.UserServiceImpl - User updated: user1
2025-02-06 20:07:14.348 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.models.User */update users 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=?,
        username=? 
    where
        id=?
2025-02-06 20:07:14.351 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.models.User.roles */delete 
    from
        users_roles 
    where
        user_id=?
2025-02-06 20:07:14.353 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.models.User.roles */insert 
    into
        users_roles (user_id, role_id) 
    values
        (?, ?)
2025-02-06 20:07:14.359 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-06 20:07:14.360 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-06 20:07:14.363 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-06 20:07:14.364 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:14.364 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-06 20:07:14.364 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-06 20:07:14.364 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.AdminController#adminPage(CustomUserDetails, Model)
2025-02-06 20:07:14.367 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.username 
    from
        users u1_0
2025-02-06 20:07:14.368 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:07:14.370 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        users_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-06 20:07:14.375 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        roles r1_0
2025-02-06 20:07:14.377 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:14.382 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:18.585 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /logout
2025-02-06 20:07:18.585 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:18.585 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@1dc70c05, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]
2025-02-06 20:07:18.585 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session CCC9EC5244EAE33CC07EEFD710EAE6C2
2025-02-06 20:07:18.585 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 20:07:18.596 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 20:07:18.596 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 20:07:18.596 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 20:07:18.597 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 20:07:18.597 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:18.601 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:18.603 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 20:07:23.968 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-06 20:07:23.970 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    JOIN
        
    FETCH
        u.roles 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name,
            u1_0.username 
        from
            users u1_0 
        join
            users_roles r1_0 
                on u1_0.id=r1_0.user_id 
        join
            roles r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.username=?
2025-02-06 20:07:24.099 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-06 20:07:24.100 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c112c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@12875e5b]
2025-02-06 20:07:24.100 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c112c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-02-06 20:07:24.100 [http-nio-8081-exec-9] INFO  r.k.s.b.d.configs.SuccessUserHandler - User 'user1' successfully authenticated with roles: [ROLE_USER]
2025-02-06 20:07:24.105 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-06 20:07:24.105 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c112c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 20:07:24.106 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-06 20:07:24.106 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-06 20:07:24.106 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controllers.UserController#userPage(CustomUserDetails, Model)
2025-02-06 20:07:24.106 [http-nio-8081-exec-10] INFO  r.k.s.b.d.controllers.UserController - Authenticated user: user1
2025-02-06 20:07:24.108 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:24.126 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:25.990 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-06 20:07:25.990 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c112c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 20:07:25.990 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=ru.kata.spring.boot_security.demo.security.CustomUserDetails@5c112c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]]
2025-02-06 20:07:25.990 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 902AB86FCAAEA6D311E91AC81FF24C78
2025-02-06 20:07:25.990 [http-nio-8081-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout=true
2025-02-06 20:07:25.998 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout=true
2025-02-06 20:07:25.998 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?logout=true
2025-02-06 20:07:25.999 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/login?logout=true", parameters={masked}
2025-02-06 20:07:25.999 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ParameterizableViewController [view="login"]
2025-02-06 20:07:25.999 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-06 20:07:26.002 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-06 20:07:26.002 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-06 20:07:54.020 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-06 20:07:54.026 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-06 20:07:54.031 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 20:07:54.034 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-06 20:07:54.042 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
